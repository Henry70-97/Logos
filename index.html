<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CreativePay - Where Creativity Meets Opportunity</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap');
        
        :root {
            --primary: #8b5cf6;
            --secondary: #ec4899;
            --accent: #f59e0b;
            --dark: #0f172a;
            --light: #f8fafc;
        }
        
        .font-cinzel { font-family: 'Cinzel', serif; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        
        /* Cinematic Intro Styles */
        .cinematic-bg {
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0f 100%);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            overflow: hidden;
        }
        
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 20s infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }
        
        .light-flare {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, transparent, rgba(139, 92, 246, 0.8), transparent);
            animation: flare 4s infinite;
        }
        
        @keyframes flare {
            0%, 100% { opacity: 0; transform: translateY(-100%); }
            50% { opacity: 1; transform: translateY(100vh); }
        }
        
        .cinematic-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            opacity: 0;
        }
        
        .glow-text {
            text-shadow: 0 0 20px rgba(139, 92, 246, 0.8),
                         0 0 40px rgba(139, 92, 246, 0.6),
                         0 0 60px rgba(139, 92, 246, 0.4);
        }
        
        @keyframes fadeInGlow {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2); }
        }
        
        @keyframes slideUp {
            0% { opacity: 0; transform: translate(-50%, -30%); }
            100% { opacity: 1; transform: translate(-50%, -50%); }
        }
        
        @keyframes creditRoll {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes zoomOut {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(3); filter: brightness(3); }
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 10000;
            animation: slideInRight 0.4s ease, slideOutRight 0.4s ease 3.6s forwards;
            max-width: 400px;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }
        
        /* Hamburger Menu */
        .hamburger-menu {
            position: fixed;
            left: -320px;
            top: 0;
            width: 320px;
            height: 100vh;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 100%);
            z-index: 1000;
            transition: left 0.3s ease;
            overflow-y: auto;
        }
        
        .hamburger-menu.open {
            left: 0;
        }
        
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .menu-overlay.active {
            display: block;
        }
        
        /* Magic Box Animation */
        .magic-box {
            width: 200px;
            height: 200px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .magic-box:hover {
            transform: scale(1.05);
        }
        
        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        
        @keyframes openBox {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(180deg); }
        }
        
        @keyframes rewardPop {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }
        
        /* Gradient Animation */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .gradient-animated {
            background: linear-gradient(-45deg, #8b5cf6, #ec4899, #f59e0b, #10b981);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1e1b4b;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #8b5cf6, #ec4899);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #7c3aed, #db2777);
        }
        
        /* Level Badge */
        .level-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.75rem;
            color: #78350f;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
        }
        
        /* Task Card Hover */
        .task-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .task-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.3);
            border-color: #8b5cf6;
        }
        
        /* Editor Styles */
        .editor-container {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            min-height: 400px;
            padding: 16px;
            background: white;
            font-family: 'Inter', sans-serif;
        }
        
        .editor-toolbar {
            border-bottom: 1px solid #e5e7eb;
            padding: 12px;
            background: #f9fafb;
            border-radius: 12px 12px 0 0;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .editor-btn {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .editor-btn:hover {
            background: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }
        
        /* Dark Mode */
        .dark-mode {
            background: #0f172a;
            color: #f8fafc;
        }
        
        .dark-mode .bg-white {
            background: #1e293b !important;
        }
        
        .dark-mode .text-gray-900 {
            color: #f8fafc !important;
        }
        
        .dark-mode .text-gray-600 {
            color: #cbd5e1 !important;
        }
        
        .dark-mode .border-gray-200 {
            border-color: #334155 !important;
        }
        
        /* Leaderboard Styles */
        .leaderboard-item {
            position: relative;
            padding-left: 60px;
        }
        
        .rank-badge {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.25rem;
        }
        
        .rank-1 {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
            box-shadow: 0 4px 12px rgba(251, 191, 36, 0.5);
        }
        
        .rank-2 {
            background: linear-gradient(135deg, #cbd5e1, #94a3b8);
            color: #1e293b;
            box-shadow: 0 4px 12px rgba(203, 213, 225, 0.5);
        }
        
        .rank-3 {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
            box-shadow: 0 4px 12px rgba(249, 115, 22, 0.5);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full font-inter bg-gray-50"><!-- Cinematic Intro -->
  <div id="cinematicIntro" class="cinematic-bg"><!-- Skip Button --> <button id="skipIntro" onclick="skipIntro()" class="fixed top-8 right-8 z-50 px-6 py-3 bg-white/20 backdrop-blur-sm text-white border-2 border-white rounded-lg hover:bg-white/30 transition-all font-semibold"> Skip Intro â†’ </button> <!-- Particles -->
   <div class="particles" id="particlesContainer"></div><!-- Light Flares -->
   <div class="light-flare" style="left: 20%; animation-delay: 0s;"></div>
   <div class="light-flare" style="left: 50%; animation-delay: 1s;"></div>
   <div class="light-flare" style="left: 80%; animation-delay: 2s;"></div><!-- Cinematic Scenes -->
   <div id="scene1" class="cinematic-text">
    <h1 class="text-6xl md:text-8xl font-cinzel font-bold glow-text">CREATIVEPAY WEBINAR</h1>
   </div>
   <div id="scene2" class="cinematic-text">
    <p class="text-2xl md:text-4xl font-playfair italic">A Creative Writers Experience</p>
   </div>
   <div id="scene3" class="cinematic-text">
    <h2 class="text-3xl md:text-5xl font-cinzel mb-8">Sponsored By</h2>
    <div id="sponsors" class="space-y-4 text-xl md:text-2xl font-inter"></div>
   </div>
   <div id="scene4" class="cinematic-text">
    <h2 class="text-5xl md:text-7xl font-cinzel font-bold glow-text mb-6">Offering Paid Writing Tasks</h2>
    <div id="taskTypes" class="space-y-3 text-lg md:text-xl font-playfair"></div>
   </div>
   <div id="scene5" class="cinematic-text">
    <h1 class="text-4xl md:text-6xl font-cinzel font-bold glow-text">Where Creativity Meets Opportunity</h1>
   </div>
  </div><!-- Menu Overlay -->
  <div id="menuOverlay" class="menu-overlay"></div><!-- Hamburger Menu -->
  <nav id="hamburgerMenu" class="hamburger-menu">
   <div class="p-6">
    <div class="flex items-center justify-between mb-8">
     <h2 class="text-2xl font-cinzel font-bold text-white">Menu</h2><button id="closeMenu" class="text-white hover:text-purple-400">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div><!-- User Profile Section -->
    <div id="menuUserProfile" class="mb-8 p-4 bg-white/10 rounded-lg"></div><!-- Menu Items -->
    <div class="space-y-2" id="menuItems"></div>
   </div>
  </nav><!-- Main Content -->
  <div id="mainContent" style="display: none;"><!-- Landing Page -->
   <div id="landingPage" class="page"><!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <div class="flex items-center justify-between">
       <div class="flex items-center space-x-4"><button id="menuToggle" class="text-purple-600 hover:text-purple-700 hidden">
         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
         </svg></button>
        <h1 class="text-2xl md:text-3xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">CreativePay</h1>
       </div>
       <div class="flex items-center space-x-4"><button id="darkModeToggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
         </svg></button> <button onclick="showPage('login')" class="px-4 py-2 text-purple-600 hover:text-purple-700 font-semibold">Login</button> <button onclick="showPage('register')" class="px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-semibold shadow-lg">Get Started</button>
       </div>
      </div>
     </div>
    </header><!-- Hero Section -->
    <section class="relative overflow-hidden py-20 gradient-animated">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-5xl md:text-7xl font-cinzel font-bold text-white mb-6 leading-tight">Where Creativity<br>
       Meets Opportunity</h1>
      <p class="text-xl md:text-2xl text-white/90 mb-8 font-playfair italic">Get paid for your creative writing. Join thousands of writers earning from their passion.</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center"><button onclick="showPage('register')" class="px-8 py-4 bg-white text-purple-600 rounded-lg hover:bg-gray-100 font-bold text-lg shadow-xl transition-all transform hover:scale-105"> Start Writing Today </button> <button onclick="scrollToSection('how-it-works')" class="px-8 py-4 bg-transparent border-2 border-white text-white rounded-lg hover:bg-white hover:text-purple-600 font-bold text-lg transition-all"> Learn More </button>
      </div>
     </div>
    </section><!-- How It Works -->
    <section id="how-it-works" class="py-20 bg-white">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl md:text-5xl font-cinzel font-bold text-center mb-4">How It Works</h2>
      <p class="text-center text-gray-600 mb-12 text-lg">Simple steps to start earning from your creativity</p>
      <div class="grid md:grid-cols-4 gap-8">
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg"><span class="text-3xl text-white font-bold">1</span>
        </div>
        <h3 class="text-xl font-bold mb-2">Sign Up</h3>
        <p class="text-gray-600">Create your free account and get a welcome bonus</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-pink-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg"><span class="text-3xl text-white font-bold">2</span>
        </div>
        <h3 class="text-xl font-bold mb-2">Choose Tasks</h3>
        <p class="text-gray-600">Browse writing tasks that match your skills</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 to-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg"><span class="text-3xl text-white font-bold">3</span>
        </div>
        <h3 class="text-xl font-bold mb-2">Submit Work</h3>
        <p class="text-gray-600">Write and submit your creative content</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-yellow-500 to-green-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg"><span class="text-3xl text-white font-bold">4</span>
        </div>
        <h3 class="text-xl font-bold mb-2">Get Paid</h3>
        <p class="text-gray-600">Receive rewards and withdraw your earnings</p>
       </div>
      </div>
     </div>
    </section><!-- Featured Tasks -->
    <section class="py-20 bg-gray-50">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl md:text-5xl font-cinzel font-bold text-center mb-4">Writing Opportunities</h2>
      <p class="text-center text-gray-600 mb-12 text-lg">Explore diverse creative writing tasks</p>
      <div class="grid md:grid-cols-3 gap-8" id="featuredTasks"></div>
     </div>
    </section><!-- Benefits -->
    <section class="py-20 bg-white">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl md:text-5xl font-cinzel font-bold text-center mb-12">Why Choose CreativePay</h2>
      <div class="grid md:grid-cols-3 gap-8">
       <div class="p-8 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-200">
        <div class="text-5xl mb-4">
         ðŸ’°
        </div>
        <h3 class="text-2xl font-bold mb-3">Earn Money</h3>
        <p class="text-gray-700">Get paid for every approved task. Withdraw anytime with flexible payment options.</p>
       </div>
       <div class="p-8 bg-gradient-to-br from-pink-50 to-orange-50 rounded-xl border-2 border-pink-200">
        <div class="text-5xl mb-4">
         ðŸ“ˆ
        </div>
        <h3 class="text-2xl font-bold mb-3">Grow Skills</h3>
        <p class="text-gray-700">Improve your writing through diverse projects and professional feedback.</p>
       </div>
       <div class="p-8 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-xl border-2 border-orange-200">
        <div class="text-5xl mb-4">
         ðŸŒŸ
        </div>
        <h3 class="text-2xl font-bold mb-3">Get Exposure</h3>
        <p class="text-gray-700">Build your portfolio and connect with publishing houses and media studios.</p>
       </div>
      </div>
     </div>
    </section><!-- Testimonials -->
    <section class="py-20 bg-gray-900 text-white">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl md:text-5xl font-cinzel font-bold text-center mb-12">Writer Success Stories</h2>
      <div class="grid md:grid-cols-3 gap-8">
       <div class="p-8 bg-white/10 rounded-xl backdrop-blur-sm">
        <div class="flex items-center mb-4">
         <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-xl font-bold">
          SK
         </div>
         <div class="ml-4">
          <h4 class="font-bold">Sarah Kamau</h4>
          <p class="text-sm text-gray-400">Elite Writer</p>
         </div>
        </div>
        <p class="text-gray-300 italic">"CreativePay transformed my writing hobby into a sustainable income. I've earned over KSh 50,000 in just 3 months!"</p>
       </div>
       <div class="p-8 bg-white/10 rounded-xl backdrop-blur-sm">
        <div class="flex items-center mb-4">
         <div class="w-12 h-12 bg-gradient-to-br from-pink-500 to-orange-500 rounded-full flex items-center justify-center text-xl font-bold">
          JO
         </div>
         <div class="ml-4">
          <h4 class="font-bold">James Odhiambo</h4>
          <p class="text-sm text-gray-400">Pro Writer</p>
         </div>
        </div>
        <p class="text-gray-300 italic">"The variety of tasks keeps me engaged. From poetry to scripts, I've expanded my creative range significantly."</p>
       </div>
       <div class="p-8 bg-white/10 rounded-xl backdrop-blur-sm">
        <div class="flex items-center mb-4">
         <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-yellow-500 rounded-full flex items-center justify-center text-xl font-bold">
          AM
         </div>
         <div class="ml-4">
          <h4 class="font-bold">Amina Mohamed</h4>
          <p class="text-sm text-gray-400">Intermediate Writer</p>
         </div>
        </div>
        <p class="text-gray-300 italic">"Fast payments and supportive community. The platform genuinely values creative writers!"</p>
       </div>
      </div>
     </div>
    </section><!-- CTA Section -->
    <section class="py-20 gradient-animated">
     <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-4xl md:text-5xl font-cinzel font-bold text-white mb-6">Ready to Start Your Creative Journey?</h2>
      <p class="text-xl text-white/90 mb-8">Join CreativePay today and turn your words into earnings</p><button onclick="showPage('register')" class="px-10 py-4 bg-white text-purple-600 rounded-lg hover:bg-gray-100 font-bold text-xl shadow-2xl transition-all transform hover:scale-105"> Get Started Free </button>
     </div>
    </section><!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-4 gap-8">
       <div>
        <h3 class="text-2xl font-cinzel font-bold mb-4 gradient-animated bg-clip-text text-transparent">CreativePay</h3>
        <p class="text-gray-400">Empowering writers to monetize their creativity</p>
       </div>
       <div>
        <h4 class="font-bold mb-4">Quick Links</h4>
        <div class="space-y-2"><a href="#" onclick="showPage('about')" class="block text-gray-400 hover:text-white">About Us</a> <a href="#" onclick="scrollToSection('how-it-works')" class="block text-gray-400 hover:text-white">How It Works</a> <a href="#" onclick="showPage('contact')" class="block text-gray-400 hover:text-white">Contact</a>
        </div>
       </div>
       <div>
        <h4 class="font-bold mb-4">Legal</h4>
        <div class="space-y-2"><a href="#" onclick="showPage('terms')" class="block text-gray-400 hover:text-white">Terms of Service</a> <a href="#" onclick="showPage('privacy')" class="block text-gray-400 hover:text-white">Privacy Policy</a>
        </div>
       </div>
       <div>
        <h4 class="font-bold mb-4">Connect</h4>
        <div class="flex space-x-4"><a href="#" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24">
           <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
          </svg></a> <a href="#" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24">
           <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
          </svg></a> <a href="#" class="text-gray-400 hover:text-white">
          <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24">
           <path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z" />
          </svg></a>
        </div>
       </div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
       <p>Â© 2024 CreativePay. All rights reserved.</p>
      </div>
     </div>
    </footer>
   </div><!-- Other pages will be added dynamically -->
   <div id="dynamicPages"></div>
  </div>
  <script>
        // Application State
        let currentUser = null;
        let currentPage = 'landing';
        let isDarkMode = false;
        let tasks = [];
        let submissions = [];
        
        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            playIntroCinematic();
            initializeTasks();
            loadUserSession();
            setupEventListeners();
            generateFeaturedTasks();
        });
        
        // Skip Intro Function
        function skipIntro() {
            const intro = document.getElementById('cinematicIntro');
            intro.style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            
            // Check if user is logged in
            if (currentUser) {
                showPage('dashboard');
            }
        }
        
        // Cinematic Intro
        function playIntroCinematic() {
            // Create particles
            const particlesContainer = document.getElementById('particlesContainer');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 4 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 20 + 's';
                particlesContainer.appendChild(particle);
            }
            
            // Scene 1: Title (0-3s)
            const scene1 = document.getElementById('scene1');
            scene1.style.animation = 'fadeInGlow 2s ease forwards';
            
            setTimeout(() => {
                scene1.style.animation = 'fadeOut 1s ease forwards';
            }, 2000);
            
            // Scene 2: Subtitle (3-6s)
            setTimeout(() => {
                const scene2 = document.getElementById('scene2');
                scene2.style.animation = 'slideUp 1.5s ease forwards';
                
                setTimeout(() => {
                    scene2.style.animation = 'fadeOut 1s ease forwards';
                }, 2500);
            }, 3000);
            
            // Scene 3: Sponsors (6-9s)
            setTimeout(() => {
                const scene3 = document.getElementById('scene3');
                const sponsors = ['Publishing Houses', 'Film Makers', 'Media Studios', 'Creative Industries'];
                const sponsorsDiv = document.getElementById('sponsors');
                
                scene3.style.opacity = '1';
                
                sponsors.forEach((sponsor, index) => {
                    setTimeout(() => {
                        const sponsorEl = document.createElement('div');
                        sponsorEl.textContent = sponsor;
                        sponsorEl.style.animation = 'creditRoll 0.8s ease forwards';
                        sponsorsDiv.appendChild(sponsorEl);
                    }, index * 400);
                });
                
                setTimeout(() => {
                    scene3.style.animation = 'fadeOut 1s ease forwards';
                }, 2500);
            }, 6000);
            
            // Scene 4: Task Types (9-13s)
            setTimeout(() => {
                const scene4 = document.getElementById('scene4');
                const taskTypes = ['Short Stories', 'Scripts', 'Poetry', 'Creative Projects'];
                const taskTypesDiv = document.getElementById('taskTypes');
                
                scene4.style.animation = 'fadeInGlow 1.5s ease forwards';
                
                taskTypes.forEach((type, index) => {
                    setTimeout(() => {
                        const typeEl = document.createElement('div');
                        typeEl.textContent = type;
                        typeEl.style.animation = 'creditRoll 0.6s ease forwards';
                        taskTypesDiv.appendChild(typeEl);
                    }, index * 300);
                });
                
                setTimeout(() => {
                    scene4.style.animation = 'fadeOut 1s ease forwards';
                }, 3500);
            }, 9000);
            
            // Scene 5: Final Title (13-16s)
            setTimeout(() => {
                const scene5 = document.getElementById('scene5');
                scene5.style.animation = 'fadeInGlow 2s ease forwards';
                
                setTimeout(() => {
                    scene5.style.animation = 'fadeOut 1s ease forwards';
                }, 2500);
            }, 13000);
            
            // Scene 6: Transition to Main (16-20s)
            setTimeout(() => {
                const intro = document.getElementById('cinematicIntro');
                intro.style.animation = 'zoomOut 2s ease forwards';
                
                setTimeout(() => {
                    intro.style.display = 'none';
                    document.getElementById('mainContent').style.display = 'block';
                    
                    // Check if user is logged in
                    if (currentUser) {
                        showPage('dashboard');
                    }
                }, 2000);
            }, 16000);
        }
        
        // Initialize Tasks
        function initializeTasks() {
            // Load tasks from localStorage if they exist
            const storedTasks = localStorage.getItem('creativepay_tasks');
            if (storedTasks) {
                tasks = JSON.parse(storedTasks);
                return;
            }
            
            // Otherwise, initialize default tasks
            tasks = [
                // POETRY TASKS (25 tasks)
                {
                    id: 1,
                    title: 'Love and Loss - Emotional Poetry',
                    category: 'Poetry',
                    description: 'Write a collection of 3-5 poems exploring themes of love, heartbreak, and healing.',
                    detailedQuestion: 'Create poems that capture the journey of a relationship from its passionate beginning to its painful end, and finally to acceptance and growth. Consider using metaphors from nature, seasons, or celestial bodies. Your poems should evoke strong emotions and include vivid imagery. Case Study Keywords: emotional vulnerability, metaphorical language, imagery, rhythm, personal growth, heartbreak journey.',
                    wordCountMin: 300,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 1000,
                    status: 'open'
                },
                {
                    id: 2,
                    title: 'Nature\'s Symphony - Environmental Poetry',
                    category: 'Poetry',
                    description: 'Compose poems celebrating the beauty and fragility of our natural world.',
                    detailedQuestion: 'Write 3-4 poems that highlight environmental concerns while celebrating nature\'s beauty. Address topics such as deforestation, ocean pollution, climate change, or endangered species. Your poetry should inspire action while maintaining artistic beauty. Use personification to give nature a voice. Case Study Keywords: environmental advocacy, personification, sensory details, call to action, conservation themes, ecological awareness.',
                    wordCountMin: 240,
                    wordCountMax: 480,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 800,
                    status: 'open'
                },
                {
                    id: 3,
                    title: 'Urban Life - City Poetry Collection',
                    category: 'Poetry',
                    description: 'Capture the energy, chaos, and beauty of city life through verse.',
                    detailedQuestion: 'Create poems that reflect the diverse experiences of urban living - the morning rush, street vendors, skyscrapers, loneliness in crowds, city lights at night. Your work should capture both the excitement and isolation of metropolitan life. Include specific sensory details unique to city environments. Case Study Keywords: urban landscape, juxtaposition, sensory overload, isolation vs. community, modern life, metropolitan imagery.',
                    wordCountMin: 240,
                    wordCountMax: 480,
                    deadline: new Date(Date.now() + 4 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 800,
                    status: 'open'
                },
                {
                    id: 4,
                    title: 'Heritage and Identity - Cultural Poetry',
                    category: 'Poetry',
                    description: 'Explore your cultural roots and identity through poetic expression.',
                    detailedQuestion: 'Write poems that delve into questions of cultural identity, heritage, tradition, and belonging. Address the experience of navigating multiple cultures, generational differences, or the preservation of traditions in modern times. Your poetry should be personally meaningful while universally relatable. Case Study Keywords: cultural identity, heritage preservation, generational wisdom, belonging, tradition vs. modernity, ancestral connection.',
                    wordCountMin: 350,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 300,
                    status: 'open'
                },
                {
                    id: 5,
                    title: 'Childhood Memories - Nostalgic Poetry',
                    category: 'Poetry',
                    description: 'Revisit the innocence and wonder of childhood through poetry.',
                    detailedQuestion: 'Create 3-5 poems that capture specific childhood memories, games, friendships, or discoveries. Your work should evoke nostalgia while revealing deeper truths about innocence, growth, and the passage of time. Use concrete details that transport readers back to their own childhoods. Case Study Keywords: nostalgia, innocence, temporal reflection, sensory memory, coming-of-age moments, universal childhood experiences.',
                    wordCountMin: 240,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 1000,
                    status: 'open'
                },
                {
                    id: 6,
                    title: 'Social Justice - Protest Poetry',
                    category: 'Poetry',
                    description: 'Use poetry as a tool for social change and justice advocacy.',
                    detailedQuestion: 'Write powerful protest poems addressing current social issues such as inequality, discrimination, police brutality, or systemic oppression. Your poetry should be bold, unapologetic, and motivating. Balance raw emotion with artistic craft. Include historical references or contemporary events to ground your work. Case Study Keywords: social activism, protest literature, systemic injustice, empowerment, resistance poetry, political awareness.',
                    wordCountMin: 240,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 1000,
                    status: 'open'
                },
                {
                    id: 7,
                    title: 'Grief and Mourning - Elegy Collection',
                    category: 'Poetry',
                    description: 'Write elegies exploring loss, grief, and remembrance.',
                    detailedQuestion: 'Compose poems that honestly explore the process of grieving - denial, anger, bargaining, depression, and acceptance. Your elegies can commemorate a loved one, a lost opportunity, or even the death of a dream. Focus on specific details and moments rather than generalizations. Case Study Keywords: grief stages, commemorative writing, emotional processing, memorial poetry, loss acceptance, healing through art.',
                    wordCountMin: 350,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 290,
                    status: 'open'
                },
                {
                    id: 8,
                    title: 'Hope and Resilience - Inspirational Poetry',
                    category: 'Poetry',
                    description: 'Create uplifting poems about overcoming adversity and finding strength.',
                    detailedQuestion: 'Write poems that inspire hope and demonstrate human resilience in the face of challenges. Draw from personal experiences or observations of others who have overcome obstacles. Your work should acknowledge pain while celebrating the human spirit\'s capacity to endure and thrive. Case Study Keywords: resilience narrative, overcoming adversity, inspirational themes, personal strength, hope restoration, triumph over struggle.',
                    wordCountMin: 250,
                    wordCountMax: 500,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 270,
                    status: 'open'
                },
                {
                    id: 9,
                    title: 'Dreams and Aspirations - Future-Focused Poetry',
                    category: 'Poetry',
                    description: 'Explore hopes, dreams, and visions for the future through verse.',
                    detailedQuestion: 'Create poems about personal aspirations, societal hopes, or imagined futures. Balance idealism with realism, acknowledging obstacles while maintaining optimism. Your poetry can address individual dreams or collective visions for a better world. Use forward-looking language and imagery. Case Study Keywords: aspirational writing, future visioning, goal pursuit, optimistic outlook, dream manifestation, societal progress.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 260,
                    status: 'open'
                },
                {
                    id: 10,
                    title: 'Seasons of Change - Transitional Poetry',
                    category: 'Poetry',
                    description: 'Use seasonal metaphors to explore life transitions and changes.',
                    detailedQuestion: 'Write 4 poems, one for each season, using seasonal imagery to represent different life phases or transitions. Spring might represent new beginnings, summer vitality, autumn letting go, and winter reflection or rest. Connect natural cycles to human experiences of change and growth. Case Study Keywords: cyclical patterns, seasonal metaphors, life transitions, natural symbolism, renewal themes, temporal progression.',
                    wordCountMin: 350,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 310,
                    status: 'open'
                },
                {
                    id: 11,
                    title: 'Mental Health Awareness - Psychological Poetry',
                    category: 'Poetry',
                    description: 'Address mental health topics with sensitivity and insight.',
                    detailedQuestion: 'Create poems exploring mental health experiences such as anxiety, depression, or recovery. Your work should destigmatize mental illness while honestly portraying the struggle. Balance darkness with glimpses of hope. Use imagery that makes internal experiences tangible to readers. Case Study Keywords: mental health advocacy, stigma reduction, psychological insight, recovery journey, emotional transparency, therapeutic writing.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 280,
                    status: 'open'
                },
                {
                    id: 12,
                    title: 'Family Bonds - Relationship Poetry',
                    category: 'Poetry',
                    description: 'Explore complex family relationships through poetic lens.',
                    detailedQuestion: 'Write poems about family dynamics - parent-child relationships, sibling bonds, or extended family connections. Explore both positive and challenging aspects of family life. Your poetry should capture the complexity of familial love, including conflicts, misunderstandings, and reconciliation. Case Study Keywords: family dynamics, generational relationships, unconditional love, family conflict resolution, inherited traits, kinship bonds.',
                    wordCountMin: 320,
                    wordCountMax: 580,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 270,
                    status: 'open'
                },
                {
                    id: 13,
                    title: 'Technology and Humanity - Modern Poetry',
                    category: 'Poetry',
                    description: 'Examine the relationship between technology and human connection.',
                    detailedQuestion: 'Create poems exploring how technology affects human relationships, communication, and identity. Address topics like social media, digital isolation, AI, or the loss of face-to-face interaction. Balance critique with acknowledgment of technology\'s benefits. Case Study Keywords: digital age, human connection, technological impact, social media culture, virtual vs. real, modern communication.',
                    wordCountMin: 280,
                    wordCountMax: 520,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 290,
                    status: 'open'
                },
                {
                    id: 14,
                    title: 'Spiritual Journey - Reflective Poetry',
                    category: 'Poetry',
                    description: 'Explore spiritual themes and existential questions through verse.',
                    detailedQuestion: 'Write poems that grapple with big questions about existence, purpose, faith, doubt, or the divine. Your work can be religious, secular, or somewhere in between. Focus on the search for meaning rather than providing definitive answers. Use contemplative tone and imagery. Case Study Keywords: spiritual exploration, existential inquiry, faith and doubt, meaning-making, transcendence, philosophical reflection.',
                    wordCountMin: 350,
                    wordCountMax: 600,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 300,
                    status: 'open'
                },
                {
                    id: 15,
                    title: 'Ocean Depths - Water-Themed Poetry',
                    category: 'Poetry',
                    description: 'Use water and ocean imagery to explore deep emotional themes.',
                    detailedQuestion: 'Create a collection of poems using water in its various forms (ocean, rain, rivers, ice) as central imagery. Explore themes like depth of emotion, fluidity of identity, cleansing, drowning in feelings, or going with the flow. Make creative use of water-related metaphors. Case Study Keywords: aquatic metaphors, emotional depth, fluidity themes, cleansing symbolism, natural elements, transformative imagery.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 260,
                    status: 'open'
                },
                {
                    id: 16,
                    title: 'Immigrant Experience - Diaspora Poetry',
                    category: 'Poetry',
                    description: 'Capture the complex emotions of immigration and displacement.',
                    detailedQuestion: 'Write poems exploring themes of immigration, belonging between two worlds, language barriers, homesickness, or building new lives in foreign lands. Draw from personal experience or empathetic observation. Address both struggles and triumphs of the immigrant experience. Case Study Keywords: displacement, cultural navigation, dual identity, belonging, language barriers, homeland nostalgia.',
                    wordCountMin: 320,
                    wordCountMax: 580,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 310,
                    status: 'open'
                },
                {
                    id: 17,
                    title: 'Aging and Wisdom - Lifecycle Poetry',
                    category: 'Poetry',
                    description: 'Reflect on the aging process and the wisdom it brings.',
                    detailedQuestion: 'Create poems that explore aging with honesty and grace - the physical changes, accumulated wisdom, regrets, achievements, and changing perspectives. Your work should challenge ageist stereotypes while acknowledging real challenges. Celebrate the fullness of a life lived. Case Study Keywords: aging gracefully, accumulated wisdom, life reflection, temporal awareness, legacy building, generational perspective.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 280,
                    status: 'open'
                },
                {
                    id: 18,
                    title: 'Silence and Solitude - Contemplative Poetry',
                    category: 'Poetry',
                    description: 'Explore the power and meaning found in silence and solitude.',
                    detailedQuestion: 'Write poems that delve into moments of silence, solitude, meditation, or introspection. Explore both the peace and discomfort that can come with being alone. Your poetry should make readers feel the weight and texture of silence. Use sparse language and negative space effectively. Case Study Keywords: contemplative practice, solitude benefits, inner dialogue, silence meaning, introspective moments, peaceful isolation.',
                    wordCountMin: 250,
                    wordCountMax: 500,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 250,
                    status: 'open'
                },
                {
                    id: 19,
                    title: 'Music and Movement - Rhythmic Poetry',
                    category: 'Poetry',
                    description: 'Create poems that capture the essence of music and dance.',
                    detailedQuestion: 'Write poems inspired by music, dance, or rhythm. Your work should have strong rhythmic elements and might reference specific musical genres, instruments, or dances. Explore how music and movement express what words cannot. Use sound devices like alliteration, assonance, and onomatopoeia. Case Study Keywords: musicality in poetry, rhythmic structure, dance imagery, sound devices, movement expression, auditory aesthetics.',
                    wordCountMin: 280,
                    wordCountMax: 520,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 270,
                    status: 'open'
                },
                {
                    id: 20,
                    title: 'Food and Culture - Culinary Poetry',
                    category: 'Poetry',
                    description: 'Explore cultural identity and memory through food-themed poetry.',
                    detailedQuestion: 'Create poems where food serves as a gateway to exploring culture, memory, family traditions, or identity. Write about specific dishes, cooking processes, family recipes, or meals that hold significance. Use sensory details to make readers taste and smell your words. Case Study Keywords: culinary heritage, sensory writing, food memories, cultural traditions, familial recipes, gustatory imagery.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 260,
                    status: 'open'
                },
                {
                    id: 21,
                    title: 'War and Peace - Conflict Poetry',
                    category: 'Poetry',
                    description: 'Address themes of war, conflict, and the longing for peace.',
                    detailedQuestion: 'Write poems about war\'s impact on individuals, families, and societies. This can include historical wars, current conflicts, or internal battles. Explore trauma, loss, courage, and the human cost of conflict. Also address themes of reconciliation and peace-building. Case Study Keywords: conflict impact, war trauma, peace advocacy, human cost, reconciliation themes, violence consequences.',
                    wordCountMin: 320,
                    wordCountMax: 580,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 320,
                    status: 'open'
                },
                {
                    id: 22,
                    title: 'Animals and Nature - Wildlife Poetry',
                    category: 'Poetry',
                    description: 'Give voice to the animal kingdom and natural world.',
                    detailedQuestion: 'Create poems from the perspective of animals or about human relationships with wildlife. Explore themes of habitat destruction, extinction, or the wisdom we can learn from animals. Use personification thoughtfully to create empathy without anthropomorphizing excessively. Case Study Keywords: animal consciousness, wildlife perspective, environmental empathy, interspecies connection, habitat preservation, nature wisdom.',
                    wordCountMin: 280,
                    wordCountMax: 530,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 270,
                    status: 'open'
                },
                {
                    id: 23,
                    title: 'Work and Labor - Occupational Poetry',
                    category: 'Poetry',
                    description: 'Honor the dignity of work and workers through verse.',
                    detailedQuestion: 'Write poems celebrating various forms of labor - physical work, care work, creative work, or intellectual work. Explore themes like workers\' rights, job satisfaction, burnout, or the meaning we find in our occupations. Give voice to often-overlooked workers. Case Study Keywords: labor dignity, workers\' narratives, occupational identity, workplace justice, meaningful work, worker empowerment.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 280,
                    status: 'open'
                },
                {
                    id: 24,
                    title: 'Mothers and Motherhood - Maternal Poetry',
                    category: 'Poetry',
                    description: 'Explore the multifaceted experience of motherhood.',
                    detailedQuestion: 'Create poems about motherhood in its many forms - biological mothers, adoptive mothers, grandmothers, or mother figures. Address both the joys and challenges, societal expectations, maternal sacrifice, or mother-child bonds. Your work should honor motherhood while acknowledging its complexity. Case Study Keywords: maternal experience, mother-child bond, sacrifice and love, motherhood challenges, nurturing roles, generational wisdom.',
                    wordCountMin: 320,
                    wordCountMax: 580,
                    deadline: new Date(Date.now() + 6 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 290,
                    status: 'open'
                },
                {
                    id: 25,
                    title: 'Time and Eternity - Temporal Poetry',
                    category: 'Poetry',
                    description: 'Contemplate the nature of time and eternity through poetry.',
                    detailedQuestion: 'Write poems exploring our relationship with time - its passage, how it speeds up or slows down, memory and anticipation, mortality, or the concept of eternity. Use temporal imagery creatively (clocks, calendars, seasons). Reflect on how we measure and experience time differently. Case Study Keywords: temporal awareness, time perception, mortality reflection, eternal themes, momentary vs. lasting, chronological meditation.',
                    wordCountMin: 300,
                    wordCountMax: 550,
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 300,
                    status: 'open'
                },

                // SHORT STORY TASKS (25 tasks)
                {
                    id: 26,
                    title: 'The Forgotten Photograph',
                    category: 'Short Story',
                    description: 'Write a story about a character who discovers an old photograph that changes everything.',
                    detailedQuestion: 'A character finds a mysterious photograph hidden in an inherited item (old book, furniture, or house). The photograph reveals a family secret that challenges everything they believed about their past. Your story should explore themes of identity, truth, and family legacy. Create compelling characters and build suspense around the photograph\'s revelation. Case Study Keywords: hidden truth revelation, family secrets, identity crisis, inheritance mystery, photographic evidence, ancestral connections.',
                    wordCountMin: 1200,
                    wordCountMax: 2000,
                    deadline: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 450,
                    status: 'open'
                },
                {
                    id: 27,
                    title: 'Last Day on Earth',
                    category: 'Short Story',
                    description: 'Imagine how someone would spend their final 24 hours if they knew the world was ending.',
                    detailedQuestion: 'Write a story following a character who learns with certainty that the world will end in 24 hours. How do they choose to spend their remaining time? Who do they want to be with? What do they want to say or do? Explore themes of priorities, relationships, regrets, and what truly matters. The ending can be ambiguous about whether the world actually ends. Case Study Keywords: mortality awareness, priority assessment, final moments, relationship reconciliation, existential choice, legacy consideration.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 500,
                    status: 'open'
                },
                {
                    id: 28,
                    title: 'The Silent Neighbor',
                    category: 'Short Story',
                    description: 'Create a mystery around a reclusive neighbor who never speaks.',
                    detailedQuestion: 'Your protagonist becomes curious about a neighbor who has lived next door for years but never speaks to anyone. Through careful observation and unexpected circumstances, they gradually uncover the neighbor\'s incredible backstory. Build intrigue and sympathy. The neighbor\'s silence should have a powerful, unexpected reason. Case Study Keywords: social isolation, observational narrative, mystery building, compassionate revelation, silent communication, hidden trauma.',
                    wordCountMin: 1300,
                    wordCountMax: 2200,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 470,
                    status: 'open'
                },
                {
                    id: 29,
                    title: 'Parallel Lives',
                    category: 'Short Story',
                    description: 'Tell two interconnected stories happening simultaneously in different places.',
                    detailedQuestion: 'Write a story that alternates between two characters in different locations whose lives are unknowingly connected. Perhaps one\'s action affects the other, or they\'re connected through an object, event, or person. The connection should be revealed gradually and create a satisfying realization. Explore themes of fate, coincidence, or interconnectedness. Case Study Keywords: narrative parallelism, interconnected fates, simultaneous storytelling, coincidental connections, dual perspective, convergent paths.',
                    wordCountMin: 1600,
                    wordCountMax: 2600,
                    deadline: new Date(Date.now() + 13 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 520,
                    status: 'open'
                },
                {
                    id: 30,
                    title: 'The Interview',
                    category: 'Short Story',
                    description: 'Write a story entirely in the format of a job interview that reveals dark secrets.',
                    detailedQuestion: 'Structure your story as a job interview dialogue, but gradually reveal that either the interviewer, interviewee, or the company itself has sinister secrets. Use the question-and-answer format creatively to build tension and reveal character. The formal interview setting should contrast with the disturbing revelations. Case Study Keywords: dialogue-driven narrative, tension building, formal vs. sinister, interview format, revelation through conversation, power dynamics.',
                    wordCountMin: 1000,
                    wordCountMax: 1800,
                    deadline: new Date(Date.now() + 9 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 420,
                    status: 'open'
                },
                {
                    id: 31,
                    title: 'Memory Thief',
                    category: 'Short Story',
                    description: 'A character wakes up each day missing one more memory from their past.',
                    detailedQuestion: 'Create a story about someone experiencing progressive memory loss, but with a twist - the memories are being deliberately stolen. Each day they wake up missing another important memory. They must race against time to discover who or what is taking their memories and why, before they lose themselves completely. Explore themes of identity and what makes us who we are. Case Study Keywords: identity preservation, memory importance, progressive loss, self-discovery race, cognitive theft, personal history.',
                    wordCountMin: 1400,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 490,
                    status: 'open'
                },
                {
                    id: 32,
                    title: 'The Last Letter',
                    category: 'Short Story',
                    description: 'A story that begins with someone receiving a letter from a deceased loved one.',
                    detailedQuestion: 'Your protagonist receives a letter that was written by someone who has died - perhaps to be delivered upon their death, or discovered years later. The letter contains information that changes the protagonist\'s understanding of their relationship or past events. Explore themes of closure, revelation, grief, and moving forward. The letter\'s contents should be emotionally impactful. Case Study Keywords: posthumous communication, grief processing, revelatory information, closure seeking, past reinterpretation, emotional resolution.',
                    wordCountMin: 1200,
                    wordCountMax: 2000,
                    deadline: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 450,
                    status: 'open'
                },
                {
                    id: 33,
                    title: 'Wrong Number',
                    category: 'Short Story',
                    description: 'A wrong number phone call leads to an unexpected relationship or discovery.',
                    detailedQuestion: 'Write a story where a character receives or makes a wrong number call that leads to a meaningful connection, an unexpected adventure, or a life-changing discovery. The initial mistake should cascade into something significant. Explore themes of chance, connection, fate, or how small moments can change our lives. Case Study Keywords: chance encounters, accidental connection, fate intervention, small moments impact, unexpected relationships, serendipitous events.',
                    wordCountMin: 1100,
                    wordCountMax: 1900,
                    deadline: new Date(Date.now() + 9 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 430,
                    status: 'open'
                },
                {
                    id: 34,
                    title: 'The Inheritance',
                    category: 'Short Story',
                    description: 'Someone inherits something unusual that comes with unexpected consequences.',
                    detailedQuestion: 'A character inherits something unexpected from a relative they barely knew - it could be an object, property, responsibility, or ability. This inheritance brings complications, revelations, or adventures. Explore family dynamics, hidden legacies, and how our past shapes our present. The inherited item should serve as a catalyst for character growth or plot development. Case Study Keywords: inherited burden, family legacy, unexpected responsibility, ancestral gifts, complicated inheritance, transformative objects.',
                    wordCountMin: 1300,
                    wordCountMax: 2300,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 480,
                    status: 'open'
                },
                {
                    id: 35,
                    title: 'The Locked Room',
                    category: 'Short Story',
                    description: 'Write about a room that has been locked for years and what happens when it finally opens.',
                    detailedQuestion: 'Create a story around a room that has been sealed for years or decades. When it\'s finally opened (deliberately or accidentally), what\'s inside? How does this discovery affect the characters and their understanding of the past? Build atmosphere and mystery. The room\'s contents should be both surprising and meaningful. Case Study Keywords: sealed secrets, revelation moment, atmospheric buildup, preserved past, discovery impact, mystery resolution.',
                    wordCountMin: 1200,
                    wordCountMax: 2100,
                    deadline: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 460,
                    status: 'open'
                },
                {
                    id: 36,
                    title: 'Parallel Universe Glimpse',
                    category: 'Short Story',
                    description: 'A character briefly sees into a parallel universe where they made different choices.',
                    detailedQuestion: 'Your protagonist gets a glimpse into an alternate reality where they made different life choices. They see what could have been - for better or worse. This experience forces them to reckon with their actual life choices and decisions. Explore themes of regret, acceptance, the road not taken, and whether we can ever truly know if we made the "right" choices. Case Study Keywords: alternate reality, choice consequences, path divergence, regret examination, life satisfaction, decision validation.',
                    wordCountMin: 1400,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 500,
                    status: 'open'
                },
                {
                    id: 37,
                    title: 'The Confession',
                    category: 'Short Story',
                    description: 'A character must confess something life-changing to someone they love.',
                    detailedQuestion: 'Write a story building up to and including a difficult confession. The protagonist has been hiding something significant and must finally reveal it. Explore the internal struggle, the moment of confession, and its immediate aftermath. The confession should test but ultimately define the relationship. Focus on emotional authenticity and the courage required for truth. Case Study Keywords: truth revelation, relationship testing, courage to confess, honesty consequences, trust building, vulnerability expression.',
                    wordCountMin: 1100,
                    wordCountMax: 1900,
                    deadline: new Date(Date.now() + 9 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 440,
                    status: 'open'
                },
                {
                    id: 38,
                    title: 'Found Footage',
                    category: 'Short Story',
                    description: 'A character finds an old video recording that shouldn\'t exist.',
                    detailedQuestion: 'Someone discovers video footage (on an old camera, tape, or digital file) that shows something impossible - perhaps them at a place they never visited, an event that never happened, or people who shouldn\'t be together. As they investigate, they uncover a truth about their past. Build mystery and psychological tension. Case Study Keywords: impossible evidence, reality questioning, past investigation, video proof, memory vs. evidence, truth unraveling.',
                    wordCountMin: 1300,
                    wordCountMax: 2200,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 470,
                    status: 'open'
                },
                {
                    id: 39,
                    title: 'The Stranger\'s Kindness',
                    category: 'Short Story',
                    description: 'An act of kindness from a stranger sets off a chain of events.',
                    detailedQuestion: 'Write a story where a stranger\'s unexpected act of kindness toward your protagonist has far-reaching consequences - either revealing something about the stranger, transforming the protagonist\'s life, or connecting to a larger pattern. Explore themes of human goodness, trust, and how small acts can have profound impacts. The kindness should be specific and memorable. Case Study Keywords: random kindness, ripple effects, human compassion, transformative gestures, stranger connection, benevolence impact.',
                    wordCountMin: 1200,
                    wordCountMax: 2000,
                    deadline: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 450,
                    status: 'open'
                },
                {
                    id: 40,
                    title: 'Time Capsule Discovery',
                    category: 'Short Story',
                    description: 'A time capsule reveals unexpected truths about the past.',
                    detailedQuestion: 'Characters unearth a time capsule (buried by students, a family, or community) that contains items revealing uncomfortable truths about the past. Perhaps predictions that came true in disturbing ways, or evidence of events that were covered up. Use the time capsule contents as a device to explore how we remember history versus what actually happened. Case Study Keywords: historical revision, buried truths, memory vs. reality, past preservation, uncomfortable revelations, collective memory.',
                    wordCountMin: 1300,
                    wordCountMax: 2300,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 480,
                    status: 'open'
                },
                {
                    id: 41,
                    title: 'The Replacement',
                    category: 'Short Story',
                    description: 'Someone begins to suspect they\'ve been replaced by an impostor.',
                    detailedQuestion: 'Your protagonist starts noticing that someone close to them (spouse, parent, friend) is subtly different - small changes in behavior, forgotten memories, altered preferences. Are they being paranoid, or has the person actually been replaced? Build psychological tension and ambiguity. The ending can confirm or deny their suspicions, but should be emotionally satisfying either way. Case Study Keywords: impostor suspicion, reality doubt, psychological thriller, behavioral changes, trust erosion, perception vs. reality.',
                    wordCountMin: 1400,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 500,
                    status: 'open'
                },
                {
                    id: 42,
                    title: 'The Apology Tour',
                    category: 'Short Story',
                    description: 'A character decides to apologize to everyone they\'ve wronged.',
                    detailedQuestion: 'Facing a life change (impending move, diagnosis, or personal epiphany), a character embarks on a mission to apologize to people they\'ve hurt throughout their life. Show several of these encounters, each revealing something about the character and the nature of apology, forgiveness, and redemption. Some apologies are accepted, others rejected. Case Study Keywords: redemption journey, forgiveness seeking, accountability, past wrongs, personal growth, reconciliation attempts.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 13 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 510,
                    status: 'open'
                },
                {
                    id: 43,
                    title: 'The Perfect Day Loop',
                    category: 'Short Story',
                    description: 'A character relives the same perfect day repeatedly and must decide whether to break the loop.',
                    detailedQuestion: 'Unlike typical time loop stories, your character is trapped reliving their happiest day. Everything goes perfectly. But they\'re aware of the loop and must decide: keep reliving this perfect day forever, or break free to an uncertain future? Explore themes of contentment, growth, and whether perfection is worth stagnation. Case Study Keywords: temporal loop, perfection vs. growth, comfort zone, change resistance, happiness sustainability, stagnation danger.',
                    wordCountMin: 1300,
                    wordCountMax: 2200,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 480,
                    status: 'open'
                },
                {
                    id: 44,
                    title: 'The Lost Language',
                    category: 'Short Story',
                    description: 'Someone discovers they can understand a language they never learned.',
                    detailedQuestion: 'Your protagonist suddenly realizes they understand a foreign language they\'ve never studied. This ability leads them to uncover a connection to their past, ancestry, or destiny. Explore questions of inherited memory, identity, and belonging. The language ability should serve as a gateway to a larger discovery about themselves. Case Study Keywords: inherited knowledge, ancestral connection, linguistic mystery, identity discovery, unexplained abilities, cultural reclamation.',
                    wordCountMin: 1200,
                    wordCountMax: 2100,
                    deadline: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 460,
                    status: 'open'
                },
                {
                    id: 45,
                    title: 'The Witness',
                    category: 'Short Story',
                    description: 'A character witnesses something they were never supposed to see.',
                    detailedQuestion: 'Write a story where your protagonist accidentally witnesses an event (crime, secret meeting, private moment, or supernatural occurrence) that they weren\'t meant to see. This knowledge puts them in danger or moral dilemma. Explore themes of truth, danger, moral responsibility, and the burden of knowledge. Build tension around what they\'ll do with what they know. Case Study Keywords: accidental witness, knowledge burden, moral dilemma, truth danger, ethical choice, secret exposure.',
                    wordCountMin: 1300,
                    wordCountMax: 2300,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 480,
                    status: 'open'
                },
                {
                    id: 46,
                    title: 'The Bridge Between',
                    category: 'Short Story',
                    description: 'A bridge serves as a metaphorical and literal crossing point in someone\'s life.',
                    detailedQuestion: 'Center your story around a bridge - physical structure that also represents transition in your character\'s life. Perhaps they must cross it to reach something or someone, or they encounter life-changing moments on or near it. Use the bridge symbolically to represent connection, transition, fear of crossing over, or the space between two states of being. Case Study Keywords: transitional symbolism, threshold crossing, metaphorical structure, life passage, connection metaphor, liminal space.',
                    wordCountMin: 1200,
                    wordCountMax: 2000,
                    deadline: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 450,
                    status: 'open'
                },
                {
                    id: 47,
                    title: 'Digital Footprint',
                    category: 'Short Story',
                    description: 'Someone discovers disturbing information about themselves online.',
                    detailedQuestion: 'Your character searches for themselves online and discovers posts, photos, or information they don\'t remember creating. As they investigate, they uncover either a forgotten past, an identity theft situation, or evidence that their life isn\'t what they thought. Explore themes of digital identity, memory, truth, and our online versus offline selves. Case Study Keywords: digital identity, online mystery, forgotten past, cyber investigation, dual existence, identity verification.',
                    wordCountMin: 1300,
                    wordCountMax: 2200,
                    deadline: new Date(Date.now() + 11 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 470,
                    status: 'open'
                },
                {
                    id: 48,
                    title: 'The Exchange',
                    category: 'Short Story',
                    description: 'Two strangers agree to exchange lives for a week.',
                    detailedQuestion: 'Two people dissatisfied with their lives agree to literally swap - moving into each other\'s homes, taking on each other\'s responsibilities, living as each other for one week. Write about this experience and what they discover about themselves, each other, and whether the grass is really greener. Explore themes of perspective, gratitude, and self-discovery. Case Study Keywords: perspective shift, life appreciation, identity swap, empathy building, grass-is-greener syndrome, self-realization.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 13 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 520,
                    status: 'open'
                },
                {
                    id: 49,
                    title: 'The Unopened Gift',
                    category: 'Short Story',
                    description: 'A character has kept a gift unopened for years - today they finally open it.',
                    detailedQuestion: 'Write about someone who received a gift years ago but never opened it - perhaps from someone they lost, during a difficult time, or because they feared what it contained. Today they finally decide to open it. Build tension around the decision and the revelation. Explore themes of avoidance, closure, facing the past, and moving forward. Case Study Keywords: avoidance behavior, delayed closure, fear confrontation, symbolic opening, past acceptance, emotional readiness.',
                    wordCountMin: 1100,
                    wordCountMax: 1900,
                    deadline: new Date(Date.now() + 9 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 430,
                    status: 'open'
                },
                {
                    id: 50,
                    title: 'The Second Chance',
                    category: 'Short Story',
                    description: 'Someone gets an unexpected opportunity to redo a life-defining moment.',
                    detailedQuestion: 'Your character mysteriously gets the chance to go back and redo one crucial moment from their past - a choice they regretted, words they wish they\'d said, or an opportunity they missed. Write about their decision-making process and what happens when they take (or don\'t take) this second chance. Explore whether changing the past would really improve things. Case Study Keywords: temporal revision, regret resolution, choice reevaluation, consequence acceptance, butterfly effect, past-present connection.',
                    wordCountMin: 1400,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 12 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 500,
                    status: 'open'
                },

                // ESSAY TASKS (20 tasks) - SET BOOK BASED
                {
                    id: 51,
                    title: 'Blossoms of the Savannah - Cultural Conflict Analysis',
                    category: 'Essay',
                    description: 'Analyze the conflict between tradition and modernity in "Blossoms of the Savannah" by Henry Ole Kulet.',
                    detailedQuestion: 'Write a comprehensive essay examining how Ole Kulet portrays the clash between traditional practices (like FGM and forced marriages) and modern values (education, women\'s rights). Focus on characters like Resian and Taiyo and how they navigate these conflicting expectations. Discuss Ole Kaelo\'s character transformation and what it represents. Use specific examples from the text to support your analysis. Case Study Keywords: cultural conflict, tradition vs. modernity, women empowerment, education importance, parental expectations, cultural identity.',
                    wordCountMin: 1440,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 4000,
                    status: 'open'
                },
                {
                    id: 52,
                    title: 'The River Between - Religious and Cultural Tensions',
                    category: 'Essay',
                    description: 'Explore the religious and cultural conflicts in Ngugi wa Thiong\'o\'s "The River Between".',
                    detailedQuestion: 'Develop an argumentative essay on how Ngugi wa Thiong\'o presents the conflict between Christianity and traditional Gikuyu beliefs in "The River Between". Analyze Waiyaki\'s position as a bridge between the two communities of Kameno and Makuyu. Discuss the symbolism of the river, circumcision, and education. How does Joshua represent religious extremism? How does the novel comment on colonialism\'s impact on African identity? Use textual evidence throughout. Case Study Keywords: religious conflict, colonialism impact, cultural identity, tradition preservation, bridge-building, fanaticism consequences.',
                    wordCountMin: 1440,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 4000,
                    status: 'open'
                },
                {
                    id: 53,
                    title: 'A Doll\'s House - Feminism and Identity',
                    category: 'Essay',
                    description: 'Analyze feminist themes and the quest for identity in Henrik Ibsen\'s "A Doll\'s House".',
                    detailedQuestion: 'Write an essay evaluating how Ibsen presents feminist ideas through Nora\'s character development in "A Doll\'s House". Discuss the doll metaphor and how it represents women\'s position in 19th-century society. Analyze Nora\'s transformation from submissive wife to independent woman. How does Torvald represent patriarchal society? What does the slamming door symbolize? Consider how the play challenged social norms of its time. Support your analysis with specific scenes and dialogue. Case Study Keywords: feminist awakening, patriarchy critique, identity formation, marriage institution, women liberation, social conformity.',
                    wordCountMin: 1440,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 4000,
                    status: 'open'
                },
                {
                    id: 54,
                    title: 'The Pearl - Greed and Corruption Theme',
                    category: 'Essay',
                    description: 'Analyze how greed and corruption are portrayed in John Steinbeck\'s "The Pearl".',
                    detailedQuestion: 'Compose a balanced analytical essay on how Steinbeck presents the destructive nature of greed in "The Pearl". Examine how the discovery of the pearl transforms Kino and his family\'s life. Discuss the symbolism of the pearl itself - is it evil or does it reveal human nature? Analyze how different characters (doctor, priest, pearl buyers) represent various forms of greed and exploitation. What commentary does the novel make about colonialism and class? How does the ending reflect the novel\'s themes? Case Study Keywords: greed consequences, materialism dangers, exploitation, poverty cycle, colonial oppression, moral corruption.',
                    wordCountMin: 1440,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 16 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 4000,
                    status: 'open'
                },
                {
                    id: 55,
                    title: 'Inheritance - Gender Inequality Critique',
                    category: 'Essay',
                    description: 'Explore how David Mulwa addresses gender inequality in his play "Inheritance".',
                    detailedQuestion: 'Write an essay examining the various manifestations of gender inequality in "Inheritance". Analyze how female characters like Lulu, Jumba, and Bengo are oppressed. How does polygamy feature in perpetuating women\'s suffering? Discuss Lacuna Kasoo\'s dictatorship and how political oppression mirrors gender oppression. What role does Judah Zen Melo play in the fight for justice? How does the play advocate for women\'s rights and broader social justice? Support your analysis with specific scenes. Case Study Keywords: gender inequality, women oppression, political tyranny, social justice, feminist resistance, patriarchal systems.',
                    wordCountMin: 1440,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 4000,
                    status: 'open'
                },
                {
                    id: 56,
                    title: 'Fast Fashion and Its Environmental Cost',
                    category: 'Essay',
                    description: 'Examine the environmental and social impacts of the fast fashion industry.',
                    detailedQuestion: 'Develop an expository essay on fast fashion\'s impacts. Cover environmental damage, labor exploitation, consumer culture, waste generation, and the economic pressures that perpetuate the system. Discuss sustainable alternatives and whether they\'re accessible to average consumers. Include specific examples and potential solutions. Case Study Keywords: sustainable fashion, consumer culture, environmental damage, labor exploitation, circular economy, ethical consumption.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 550,
                    status: 'open'
                },
                {
                    id: 57,
                    title: 'The Loneliness Epidemic in Modern Society',
                    category: 'Essay',
                    description: 'Analyze the causes and consequences of increasing loneliness in contemporary life.',
                    detailedQuestion: 'Write a cause-and-effect essay exploring why loneliness has become a major public health concern. Examine factors like urbanization, technology use, changing family structures, work culture, and social media. Discuss physical and mental health impacts. Propose community-level and policy solutions. Case Study Keywords: social isolation, public health crisis, community breakdown, digital connection vs. real connection, urban anonymity, mental health impact.',
                    wordCountMin: 1600,
                    wordCountMax: 2600,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 570,
                    status: 'open'
                },
                {
                    id: 58,
                    title: 'Should College Education Be Free?',
                    category: 'Essay',
                    description: 'Argue for or against making college education free for all students.',
                    detailedQuestion: 'Compose an argumentative essay on free college education. Consider economic impacts, equality of opportunity, quality concerns, taxpayer burden, international comparisons, and effects on society. Address counterarguments to your position. Include discussion of who would benefit most and potential unintended consequences. Case Study Keywords: educational access, economic investment, opportunity equality, taxpayer responsibility, meritocracy, social mobility.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 540,
                    status: 'open'
                },
                {
                    id: 59,
                    title: 'The Gig Economy: Freedom or Exploitation?',
                    category: 'Essay',
                    description: 'Evaluate whether the gig economy empowers workers or exploits them.',
                    detailedQuestion: 'Write an analytical essay on the gig economy. Examine flexibility versus job security, income potential versus instability, and worker classification issues. Consider perspectives of workers, companies, and society. Discuss regulatory challenges and possible reforms. Balance entrepreneurial opportunity with worker protection concerns. Case Study Keywords: labor rights, job flexibility, economic precarity, worker classification, platform economy, employment evolution.',
                    wordCountMin: 1600,
                    wordCountMax: 2600,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 580,
                    status: 'open'
                },
                {
                    id: 60,
                    title: 'The Role of Art in Social Change',
                    category: 'Essay',
                    description: 'Explore how art influences society and drives social movements.',
                    detailedQuestion: 'Develop an essay examining art\'s power to inspire social change. Use historical and contemporary examples of protest art, music, literature, or visual art that sparked movements or shifted perspectives. Discuss whether art should be political and how it communicates across barriers. Consider both subtle and explicit forms of social commentary in art. Case Study Keywords: artistic activism, cultural impact, protest art, social consciousness, creative resistance, art as communication.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 550,
                    status: 'open'
                },
                {
                    id: 61,
                    title: 'Privacy in the Age of Big Data',
                    category: 'Essay',
                    description: 'Discuss the trade-offs between data collection, personalization, and privacy.',
                    detailedQuestion: 'Write an essay on privacy concerns in our data-driven world. Examine what data is collected, how it\'s used, benefits of personalization versus privacy costs, surveillance concerns, and data breach risks. Discuss consent, regulation (like GDPR), and individual versus corporate responsibility. Propose balanced approaches to data use. Case Study Keywords: data privacy, surveillance capitalism, informed consent, personal data ownership, digital footprint, privacy regulations.',
                    wordCountMin: 1600,
                    wordCountMax: 2600,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 580,
                    status: 'open'
                },
                {
                    id: 62,
                    title: 'The Impact of Cancel Culture',
                    category: 'Essay',
                    description: 'Analyze the phenomenon of cancel culture and its effects on society.',
                    detailedQuestion: 'Compose a balanced essay on cancel culture. Define the term and examine specific examples. Discuss accountability versus mob justice, free speech implications, proportionality of consequences, and effects on public discourse. Consider both harmful behavior that deserves consequences and potential overreach. Address the role of social media in amplifying cancellations. Case Study Keywords: social accountability, public shaming, consequence culture, free speech, online mob justice, proportional response.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 560,
                    status: 'open'
                },
                {
                    id: 63,
                    title: 'Urbanization: Challenges and Opportunities',
                    category: 'Essay',
                    description: 'Examine the global trend toward urbanization and its implications.',
                    detailedQuestion: 'Write an essay exploring worldwide urbanization trends. Discuss infrastructure challenges, environmental impacts, economic opportunities, social stratification, and quality of life issues. Compare approaches in different regions. Address slum formation, gentrification, and sustainable urban planning. Consider both developed and developing nation perspectives. Case Study Keywords: urban planning, sustainable cities, population density, infrastructure challenges, urban-rural migration, city development.',
                    wordCountMin: 1600,
                    wordCountMax: 2700,
                    deadline: new Date(Date.now() + 16 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 590,
                    status: 'open'
                },
                {
                    id: 64,
                    title: 'The Future of Work: Automation and Employment',
                    category: 'Essay',
                    description: 'Discuss how automation will reshape employment and what society should do to prepare.',
                    detailedQuestion: 'Develop an essay on automation\'s impact on employment. Examine which jobs are at risk, new jobs being created, required skill shifts, and timelines for change. Discuss education reform, retraining programs, social safety nets, and whether fears of mass unemployment are justified. Include historical perspective on technological job displacement. Case Study Keywords: job automation, workforce transition, skills adaptation, technological unemployment, education reform, future-proofing careers.',
                    wordCountMin: 1700,
                    wordCountMax: 2700,
                    deadline: new Date(Date.now() + 16 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 600,
                    status: 'open'
                },
                {
                    id: 65,
                    title: 'Consumerism and Personal Identity',
                    category: 'Essay',
                    description: 'Explore how consumer culture shapes personal and social identity.',
                    detailedQuestion: 'Write an essay examining the relationship between what we buy and who we are. Discuss brand identity, status symbols, minimalism movements, and whether we can separate self-worth from consumption. Address marketing\'s role in shaping desires and identities. Consider cultural variations in consumer behavior and alternatives to consumer-based identity. Case Study Keywords: consumer identity, brand culture, materialism, identity formation, marketing psychology, anti-consumerism.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 550,
                    status: 'open'
                },
                {
                    id: 66,
                    title: 'The Importance of Biodiversity',
                    category: 'Essay',
                    description: 'Explain why biodiversity matters and what we stand to lose.',
                    detailedQuestion: 'Compose an expository essay on biodiversity\'s importance. Explain ecosystem services, medical discoveries from nature, food security, and ecological balance. Discuss extinction rates, habitat loss, and climate change impacts. Address conservation approaches and whether humans have a moral obligation to other species. Make complex scientific concepts accessible. Case Study Keywords: species extinction, ecosystem services, habitat preservation, ecological balance, conservation biology, natural resources.',
                    wordCountMin: 1600,
                    wordCountMax: 2600,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 570,
                    status: 'open'
                },
                {
                    id: 67,
                    title: 'Digital Literacy as a Fundamental Skill',
                    category: 'Essay',
                    description: 'Argue why digital literacy should be considered as essential as reading and writing.',
                    detailedQuestion: 'Write an argumentative essay positioning digital literacy as a basic right and necessity. Define what digital literacy encompasses beyond basic computer use - including critical evaluation of online information, understanding privacy, and navigating digital citizenship. Discuss educational implications, the digital divide, and consequences of digital illiteracy in modern society. Case Study Keywords: digital citizenship, information literacy, technology access, educational equity, critical thinking, 21st-century skills.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 540,
                    status: 'open'
                },
                {
                    id: 68,
                    title: 'The Psychology of Conspiracy Theories',
                    category: 'Essay',
                    description: 'Analyze why people believe in conspiracy theories and their societal impact.',
                    detailedQuestion: 'Develop an analytical essay on conspiracy theory belief. Examine psychological factors (pattern recognition, need for control, distrust), social factors (community, identity), and how the internet amplifies conspiracy thinking. Discuss real-world consequences and approaches to addressing conspiracy theory spread without dismissing believers. Case Study Keywords: cognitive biases, pattern recognition, distrust factors, online radicalization, misinformation spread, belief psychology.',
                    wordCountMin: 1600,
                    wordCountMax: 2600,
                    deadline: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 580,
                    status: 'open'
                },
                {
                    id: 69,
                    title: 'The Value of Failure in Success',
                    category: 'Essay',
                    description: 'Explore how failure contributes to eventual success and personal growth.',
                    detailedQuestion: 'Write a reflective essay on failure\'s role in success. Use examples from business, science, sports, or personal life to illustrate how setbacks lead to growth. Discuss cultural attitudes toward failure, perfectionism, and resilience. Address how fear of failure holds people back and how reframing failure as learning changes outcomes. Case Study Keywords: resilience building, growth mindset, learning from setbacks, perfectionism, risk-taking, iterative improvement.',
                    wordCountMin: 1400,
                    wordCountMax: 2400,
                    deadline: new Date(Date.now() + 13 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 520,
                    status: 'open'
                },
                {
                    id: 70,
                    title: 'Language Extinction and Cultural Loss',
                    category: 'Essay',
                    description: 'Discuss the implications of languages dying out around the world.',
                    detailedQuestion: 'Compose an essay on language extinction. Explain how many languages are endangered, why they disappear, and what dies with them - unique knowledge, cultural perspective, and cognitive diversity. Discuss preservation efforts, whether language death is inevitable, and the dominance of major languages. Balance practical considerations with cultural preservation. Case Study Keywords: linguistic diversity, cultural preservation, indigenous knowledge, language endangerment, cognitive diversity, globalization impact.',
                    wordCountMin: 1500,
                    wordCountMax: 2500,
                    deadline: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
                    reward: 560,
                    status: 'open'
                }
            ];
            
            // Save tasks to localStorage
            localStorage.setItem('creativepay_tasks', JSON.stringify(tasks));
        }
        
        // Generate Featured Tasks for Landing
        function generateFeaturedTasks() {
            const container = document.getElementById('featuredTasks');
            if (!container) return;
            
            const featured = tasks.slice(0, 3);
            
            container.innerHTML = featured.map(task => `
                <div class="task-card bg-white p-6 rounded-xl shadow-lg">
                    <div class="flex justify-between items-start mb-4">
                        <span class="px-3 py-1 bg-purple-100 text-purple-700 text-sm font-semibold rounded-full">${task.category}</span>
                        <span class="px-3 py-1 bg-green-100 text-green-700 text-sm font-bold rounded-full">KSh ${task.reward}</span>
                    </div>
                    <h3 class="text-xl font-bold mb-2">${task.title}</h3>
                    <p class="text-gray-600 mb-4 text-sm line-clamp-2">${task.description}</p>
                    <div class="flex items-center justify-between text-sm text-gray-500">
                        <span>ðŸ“ ${task.wordCountMin}-${task.wordCountMax} words</span>
                        <span>â° ${Math.ceil((new Date(task.deadline) - new Date()) / (1000 * 60 * 60 * 24))} days</span>
                    </div>
                    <button onclick="showRegisterPrompt()" class="w-full mt-4 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-semibold">
                        Start Writing
                    </button>
                </div>
            `).join('');
        }
        
        function showRegisterPrompt() {
            showToast('Please register or login to access writing tasks', 'info');
            setTimeout(() => showPage('register'), 1500);
        }
        
        // Event Listeners Setup
        function setupEventListeners() {
            // Menu Toggle
            const menuToggle = document.getElementById('menuToggle');
            const closeMenu = document.getElementById('closeMenu');
            const menuOverlay = document.getElementById('menuOverlay');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleMenu);
            }
            
            if (closeMenu) {
                closeMenu.addEventListener('click', toggleMenu);
            }
            
            if (menuOverlay) {
                menuOverlay.addEventListener('click', toggleMenu);
            }
            
            // Dark Mode Toggle
            const darkModeToggle = document.getElementById('darkModeToggle');
            if (darkModeToggle) {
                darkModeToggle.addEventListener('click', toggleDarkMode);
            }
        }
        
        // Menu Functions
        function toggleMenu() {
            const menu = document.getElementById('hamburgerMenu');
            const overlay = document.getElementById('menuOverlay');
            
            menu.classList.toggle('open');
            overlay.classList.toggle('active');
        }
        
        function updateMenu() {
            const menuItems = document.getElementById('menuItems');
            const menuProfile = document.getElementById('menuUserProfile');
            
            if (!currentUser) return;
            
            // Update profile section
            menuProfile.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-lg">
                        ${currentUser.name.charAt(0).toUpperCase()}
                    </div>
                    <div>
                        <h3 class="text-white font-bold">${currentUser.name}</h3>
                        <span class="level-badge">${currentUser.level}</span>
                    </div>
                </div>
                <div class="mt-3 grid grid-cols-2 gap-2 text-center">
                    <div class="bg-white/10 rounded-lg p-2">
                        <div class="text-yellow-400 font-bold text-lg">${currentUser.points}</div>
                        <div class="text-xs text-gray-300">Points</div>
                    </div>
                    <div class="bg-white/10 rounded-lg p-2">
                        <div class="text-green-400 font-bold text-lg">KSh ${currentUser.earnings.toFixed(2)}</div>
                        <div class="text-xs text-gray-300">Earnings</div>
                    </div>
                </div>
            `;
            
            // Menu items
            const menuStructure = [
                { icon: 'ðŸ ', label: 'Dashboard', page: 'dashboard' },
                { icon: 'ðŸ“', label: 'Writing Tasks', page: 'tasks' },
                { icon: 'ðŸ“¤', label: 'Submit Task', page: 'submit' },
                { icon: 'ðŸ“Š', label: 'My Submissions', page: 'submissions' },
                { icon: 'ï¿½ï¿½ï¿½ï¿½', label: 'Withdraw', page: 'withdraw' },
                { icon: 'ðŸ’Ž', label: 'Subscription', page: 'subscription' },
                { icon: 'ðŸ’³', label: 'Payment Details', page: 'payment-settings' },
                { icon: 'ðŸ†', label: 'Leaderboard', page: 'leaderboard' },
                { icon: 'â­', label: 'View Reviews', page: 'reviews' },
                { icon: 'ðŸ’µ', label: 'Request Refund', page: 'refund' },
                { icon: 'ðŸ“¢', label: 'Report/Complain', page: 'report' },
                { icon: 'ðŸ‘¤', label: 'Profile', page: 'profile' },
                { icon: 'ðŸšª', label: 'Logout', action: 'logout' }
            ];
            
            menuItems.innerHTML = menuStructure.map(item => `
                <button onclick="${item.action ? item.action + '()' : `showPage('${item.page}')`}" class="w-full flex items-center space-x-3 px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors">
                    <span class="text-xl">${item.icon}</span>
                    <span class="font-medium">${item.label}</span>
                </button>
            `).join('');
        }
        
        // Dark Mode
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
        }
        
        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.style.display = 'none');
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = '';
            
            // Show menu toggle only when logged in
            const menuToggle = document.getElementById('menuToggle');
            if (menuToggle) {
                menuToggle.classList.toggle('hidden', !currentUser);
            }
            
            currentPage = pageId;
            
            // Close menu
            const menu = document.getElementById('hamburgerMenu');
            const overlay = document.getElementById('menuOverlay');
            menu.classList.remove('open');
            overlay.classList.remove('active');
            
            // Route to appropriate page
            switch(pageId) {
                case 'landing':
                    document.getElementById('landingPage').style.display = 'block';
                    break;
                case 'register':
                    renderRegisterPage();
                    break;
                case 'login':
                    renderLoginPage();
                    break;
                case 'welcome-bonus':
                    renderWelcomeBonusPage();
                    break;
                case 'dashboard':
                    renderDashboardPage();
                    break;
                case 'tasks':
                    renderTasksPage();
                    break;
                case 'submit':
                    renderSubmitTaskPage();
                    break;
                case 'withdraw':
                    renderWithdrawPage();
                    break;
                case 'subscription':
                    renderSubscriptionPage();
                    break;
                case 'subscription-payment':
                    renderSubscriptionPaymentPage();
                    break;
                case 'leaderboard':
                    renderLeaderboardPage();
                    break;
                case 'profile':
                    renderProfilePage();
                    break;
                case 'payment-settings':
                    renderPaymentSettingsPage();
                    break;
                case 'submissions':
                    renderSubmissionsPage();
                    break;
                case 'reviews':
                    renderReviewsPage();
                    break;
                case 'refund':
                    renderRefundPage();
                    break;
                case 'report':
                    renderReportPage();
                    break;
                case 'about':
                    renderAboutPage();
                    break;
                case 'contact':
                    renderContactPage();
                    break;
                case 'terms':
                    renderTermsPage();
                    break;
                case 'privacy':
                    renderPrivacyPage();
                    break;
                default:
                    document.getElementById('landingPage').style.display = 'block';
            }
        }
        
        // Render Register Page
        function renderRegisterPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center py-12 px-4">
                    <div class="max-w-md w-full">
                        <div class="bg-white rounded-2xl shadow-2xl p-8">
                            <h2 class="text-3xl font-cinzel font-bold text-center mb-2">Join CreativePay</h2>
                            <p class="text-center text-gray-600 mb-6">Start your creative writing journey</p>
                            
                            <form id="registerForm" onsubmit="handleRegister(event)" class="space-y-4">
                                <div>
                                    <label for="regName" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                    <input type="text" id="regName" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div>
                                    <label for="regEmail" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                    <input type="email" id="regEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div>
                                    <label for="regPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                                    <input type="tel" id="regPhone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                                    <div class="grid grid-cols-3 gap-3">
                                        <select id="regDay" required class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                            <option value="">Day</option>
                                        </select>
                                        <select id="regMonth" required class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                            <option value="">Month</option>
                                        </select>
                                        <select id="regYear" required class="px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                            <option value="">Year</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="regPassword" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                    <input type="password" id="regPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div>
                                    <label for="regConfirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
                                    <input type="password" id="regConfirmPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div class="flex items-center">
                                    <input type="checkbox" id="regTerms" required class="w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded">
                                    <label for="regTerms" class="ml-2 text-sm text-gray-600">
                                        I agree to the <a href="#" onclick="showPage('terms')" class="text-purple-600 hover:underline">Terms & Conditions</a>
                                    </label>
                                </div>
                                
                                <button type="submit" class="w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Create Account
                                </button>
                            </form>
                            
                            <p class="text-center text-gray-600 mt-6">
                                Already have an account? 
                                <button onclick="showPage('login')" class="text-purple-600 hover:underline font-semibold">Login</button>
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            // Populate date dropdowns
            populateDateDropdowns();
        }
        
        // Populate Date Dropdowns
        function populateDateDropdowns() {
            const daySelect = document.getElementById('regDay');
            const monthSelect = document.getElementById('regMonth');
            const yearSelect = document.getElementById('regYear');
            
            if (!daySelect || !monthSelect || !yearSelect) return;
            
            // Populate days (1-31)
            for (let i = 1; i <= 31; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                daySelect.appendChild(option);
            }
            
            // Populate months
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            months.forEach((month, index) => {
                const option = document.createElement('option');
                option.value = index + 1;
                option.textContent = month;
                monthSelect.appendChild(option);
            });
            
            // Populate years (from current year down to 100 years ago)
            const currentYear = new Date().getFullYear();
            for (let i = currentYear; i >= currentYear - 100; i--) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                yearSelect.appendChild(option);
            }
        }
        
        // Handle Registration
        function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const day = document.getElementById('regDay').value;
            const month = document.getElementById('regMonth').value;
            const year = document.getElementById('regYear').value;
            const dob = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match!', 'error');
                return;
            }
            
            // Check age (must be 18+)
            const birthDate = new Date(dob);
            const age = new Date().getFullYear() - birthDate.getFullYear();
            if (age < 18) {
                showToast('You must be 18 or older to register', 'error');
                return;
            }
            
            // Create user account
            currentUser = {
                id: Date.now(),
                name: name,
                email: email,
                phone: phone,
                dob: dob,
                password: password,
                joinDate: new Date().toISOString(),
                level: 'Beginner',
                points: 0,
                earnings: 0,
                bonusBalance: 0,
                earningsBalance: 0,
                bio: '',
                skills: [],
                badges: [],
                paymentDetails: null,
                subscriptionType: 'none', // none, basic, premium
                subscriptionExpiry: null,
                tasksCompleted: 0,
                freeTaskUsed: false
            };
            
            saveUserSession();
            showToast('Account created successfully!', 'success');
            
            // Redirect to welcome bonus
            setTimeout(() => {
                showPage('welcome-bonus');
            }, 1500);
        }
        
        // Render Login Page
        function renderLoginPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center py-12 px-4">
                    <div class="max-w-md w-full">
                        <div class="bg-white rounded-2xl shadow-2xl p-8">
                            <h2 class="text-3xl font-cinzel font-bold text-center mb-2">Welcome Back</h2>
                            <p class="text-center text-gray-600 mb-6">Login to continue your creative journey</p>
                            
                            <form id="loginForm" onsubmit="handleLogin(event)" class="space-y-4">
                                <div>
                                    <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                    <input type="email" id="loginEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div>
                                    <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                    <input type="password" id="loginPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <input type="checkbox" id="rememberMe" class="w-4 h-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded">
                                        <label for="rememberMe" class="ml-2 text-sm text-gray-600">Remember me</label>
                                    </div>
                                    <button type="button" onclick="showToast('Password reset feature coming soon!', 'info')" class="text-sm text-purple-600 hover:underline">
                                        Forgot password?
                                    </button>
                                </div>
                                
                                <button type="submit" class="w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Login
                                </button>
                            </form>
                            
                            <p class="text-center text-gray-600 mt-6">
                                Don't have an account? 
                                <button onclick="showPage('register')" class="text-purple-600 hover:underline font-semibold">Register</button>
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            // Populate date dropdowns
            populateDateDropdowns();
        }
        
        // Handle Login
        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Check stored user
            const storedUser = localStorage.getItem('creativepay_user');
            if (storedUser) {
                const user = JSON.parse(storedUser);
                if (user.email === email && user.password === password) {
                    currentUser = user;
                    showToast('Login successful!', 'success');
                    updateMenu();
                    setTimeout(() => {
                        showPage('dashboard');
                    }, 1500);
                    return;
                }
            }
            
            showToast('Invalid email or password', 'error');
        }
        
        // Render Welcome Bonus Page
        function renderWelcomeBonusPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center py-12 px-4">
                    <div class="max-w-2xl w-full text-center">
                        <h1 class="text-4xl md:text-5xl font-cinzel font-bold text-white mb-4">Welcome ${currentUser.name}!</h1>
                        <p class="text-xl text-white/90 mb-8">Shuffle the magic box to claim your welcome bonus!</p>
                        
                        <div class="flex justify-center mb-8">
                            <div id="magicBox" class="magic-box cursor-pointer" onclick="openMagicBox()">
                                <svg viewBox="0 0 200 200" class="w-full h-full">
                                    <defs>
                                        <linearGradient id="boxGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                            <stop offset="50%" style="stop-color:#ec4899;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:1" />
                                        </linearGradient>
                                    </defs>
                                    <!-- Box body -->
                                    <rect x="40" y="80" width="120" height="100" fill="url(#boxGradient)" stroke="white" stroke-width="3" rx="5"/>
                                    <!-- Box lid -->
                                    <rect id="boxLid" x="30" y="70" width="140" height="20" fill="url(#boxGradient)" stroke="white" stroke-width="3" rx="5"/>
                                    <!-- Ribbon -->
                                    <rect x="95" y="60" width="10" height="130" fill="gold" opacity="0.8"/>
                                    <rect x="30" y="120" width="140" height="10" fill="gold" opacity="0.8"/>
                                    <!-- Sparkles -->
                                    <circle cx="50" cy="60" r="3" fill="white" opacity="0.8"/>
                                    <circle cx="150" cy="60" r="3" fill="white" opacity="0.8"/>
                                    <circle cx="100" cy="40" r="4" fill="white" opacity="0.9"/>
                                </svg>
                            </div>
                        </div>
                        
                        <div id="rewardDisplay" class="hidden mb-8">
                            <div class="inline-block bg-white rounded-2xl p-8 shadow-2xl">
                                <div class="text-6xl mb-4">ï¿½ï¿½ï¿½ï¿½</div>
                                <h2 class="text-3xl font-bold text-purple-600 mb-2">Congratulations!</h2>
                                <p class="text-gray-600 mb-4">You've received</p>
                                <div id="rewardAmount" class="text-5xl font-bold gradient-animated bg-clip-text text-transparent mb-6"></div>
                                <button onclick="completeWelcomeBonus()" class="px-8 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Continue to Dashboard
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Populate date dropdowns
            populateDateDropdowns();
        }
        
        // Open Magic Box
        function openMagicBox() {
            const magicBox = document.getElementById('magicBox');
            const rewardDisplay = document.getElementById('rewardDisplay');
            const rewardAmount = document.getElementById('rewardAmount');
            
            // Add shake animation
            magicBox.style.animation = 'shake 0.5s ease';
            
            setTimeout(() => {
                // Open box animation
                const boxLid = document.getElementById('boxLid');
                boxLid.style.transformOrigin = 'bottom center';
                boxLid.style.animation = 'openBox 1s ease forwards';
                
                // Generate random bonus (1-15 KSh)
                const bonus = Math.floor(Math.random() * 15) + 1;
                
                setTimeout(() => {
                    // Hide box, show reward
                    magicBox.style.display = 'none';
                    rewardDisplay.classList.remove('hidden');
                    rewardDisplay.style.animation = 'rewardPop 0.8s ease forwards';
                    rewardAmount.textContent = `KSh ${bonus}`;
                    
                    // Add bonus to user account
                    currentUser.bonusBalance = bonus;
                    currentUser.points += bonus * 10; // 10 points per KSh
                    saveUserSession();
                    
                    showToast(`Welcome bonus of KSh ${bonus} added!`, 'success');
                }, 1000);
            }, 500);
        }
        
        // Complete Welcome Bonus
        function completeWelcomeBonus() {
            updateMenu();
            showPage('dashboard');
        }
        
        // Render Dashboard
        function renderDashboardPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            
            // Calculate stats
            const pendingTasks = submissions.filter(s => s.status === 'pending').length;
            const approvedTasks = submissions.filter(s => s.status === 'approved').length;
            const rejectedTasks = submissions.filter(s => s.status === 'rejected').length;
            const totalEarnings = currentUser.earnings + currentUser.bonusBalance;
            
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">CreativePay</h1>
                                </div>
                                <button onclick="toggleDarkMode()" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <!-- Welcome Section -->
                        <div class="mb-8 p-6 gradient-animated rounded-xl shadow-lg text-white">
                            <h2 class="text-3xl font-cinzel font-bold mb-2">Welcome back, ${currentUser.name}!</h2>
                            <p class="text-lg opacity-90">Ready to create something amazing today?</p>
                        </div>
                        
                        <!-- Stats Grid -->
                        <div class="grid md:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-purple-500">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Total Earnings</p>
                                        <p class="text-3xl font-bold text-purple-600">KSh ${totalEarnings.toFixed(2)}</p>
                                    </div>
                                    <div class="text-4xl">ðŸ’°</div>
                                </div>
                            </div>
                            
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-pink-500">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Points</p>
                                        <p class="text-3xl font-bold text-pink-600">${currentUser.points}</p>
                                    </div>
                                    <div class="text-4xl">â­</div>
                                </div>
                            </div>
                            
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-orange-500">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Level</p>
                                        <p class="text-2xl font-bold text-orange-600">${currentUser.level}</p>
                                    </div>
                                    <div class="text-4xl">ðŸ†</div>
                                </div>
                            </div>
                            
                            <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-600 text-sm font-medium">Approved Tasks</p>
                                        <p class="text-3xl font-bold text-green-600">${approvedTasks}</p>
                                    </div>
                                    <div class="text-4xl">âœ…</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Balance Breakdown -->
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-xl shadow-lg border-2 border-yellow-200">
                                <h3 class="text-xl font-bold mb-4 text-yellow-700">ðŸ’° Bonus Balance</h3>
                                <p class="text-4xl font-bold text-yellow-600 mb-2">KSh ${currentUser.bonusBalance.toFixed(2)}</p>
                                <p class="text-sm text-gray-600">No minimum withdrawal</p>
                                <button onclick="showPage('withdraw')" class="mt-4 w-full px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 font-semibold">
                                    Withdraw Bonus
                                </button>
                            </div>
                            
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl shadow-lg border-2 border-green-200">
                                <h3 class="text-xl font-bold mb-4 text-green-700">ðŸ’µ Earnings Balance</h3>
                                <p class="text-4xl font-bold text-green-600 mb-2">KSh ${currentUser.earningsBalance.toFixed(2)}</p>
                                <p class="text-sm text-gray-600">Withdrawals under KSh 10 may result in negative balance</p>
                                <button onclick="showPage('withdraw')" class="mt-4 w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 font-semibold">
                                    Withdraw Earnings
                                </button>
                            </div>
                        </div>
                        
                        <!-- Task Status -->
                        <div class="grid md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-gray-700">Pending Review</h3>
                                    <span class="text-2xl">â³</span>
                                </div>
                                <p class="text-4xl font-bold text-blue-600">${pendingTasks}</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-gray-700">Approved</h3>
                                    <span class="text-2xl">âœ…</span>
                                </div>
                                <p class="text-4xl font-bold text-green-600">${approvedTasks}</p>
                            </div>
                            
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-gray-700">Rejected</h3>
                                    <span class="text-2xl">ï¿½ï¿½ï¿½</span>
                                </div>
                                <p class="text-4xl font-bold text-red-600">${rejectedTasks}</p>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                            <h3 class="text-xl font-bold mb-4">Quick Actions</h3>
                            <div class="grid md:grid-cols-4 gap-4">
                                <button onclick="showPage('tasks')" class="p-4 bg-gradient-to-br from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 font-semibold transition-all transform hover:scale-105">
                                    ðŸ“ Browse Tasks
                                </button>
                                <button onclick="showPage('submit')" class="p-4 bg-gradient-to-br from-pink-500 to-orange-500 text-white rounded-lg hover:from-pink-600 hover:to-orange-600 font-semibold transition-all transform hover:scale-105">
                                    ðŸ“¤ Submit Work
                                </button>
                                <button onclick="showPage('withdraw')" class="p-4 bg-gradient-to-br from-orange-500 to-yellow-500 text-white rounded-lg hover:from-orange-600 hover:to-yellow-600 font-semibold transition-all transform hover:scale-105">
                                    ðŸ’° Withdraw
                                </button>
                                <button onclick="showPage('leaderboard')" class="p-4 bg-gradient-to-br from-yellow-500 to-green-500 text-white rounded-lg hover:from-yellow-600 hover:to-green-600 font-semibold transition-all transform hover:scale-105">
                                    ðŸ† Leaderboard
                                </button>
                            </div>
                        </div>
                        
                        <!-- Recent Activity -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-xl font-bold mb-4">Recent Activity</h3>
                            <div id="recentActivity" class="space-y-4">
                                ${!currentUser.recentActivity || (currentUser.recentActivity.length === 0 && submissions.length === 0) ? `
                                    <div class="text-center py-8 text-gray-500">
                                        <p class="text-lg">No recent activity</p>
                                        <button onclick="showPage('tasks')" class="mt-4 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                                            Start Your First Task
                                        </button>
                                    </div>
                                ` : `
                                    ${currentUser.recentActivity ? currentUser.recentActivity.map(activity => `
                                        <div class="flex items-center justify-between p-4 ${activity.status === 'Payment in Progress' ? 'bg-yellow-50 border-2 border-yellow-300' : 'bg-gray-50'} rounded-lg">
                                            <div>
                                                <h4 class="font-semibold">ðŸ’¸ Withdrawal Request</h4>
                                                <p class="text-sm text-gray-600">Amount: KSh ${activity.amount.toFixed(2)} via ${activity.method.toUpperCase()}</p>
                                                <p class="text-xs text-gray-500">${new Date(activity.date).toLocaleDateString()} ${new Date(activity.date).toLocaleTimeString()}</p>
                                            </div>
                                            <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-semibold">
                                                ${activity.status}
                                            </span>
                                        </div>
                                    `).join('') : ''}
                                    ${submissions.slice(0, 3).map(sub => `
                                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                            <div>
                                                <h4 class="font-semibold">${sub.title}</h4>
                                                <p class="text-sm text-gray-600">Submitted ${new Date(sub.submittedDate).toLocaleDateString()}</p>
                                            </div>
                                            <span class="px-3 py-1 ${sub.status === 'approved' ? 'bg-green-100 text-green-700' : sub.status === 'rejected' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'} rounded-full text-sm font-semibold">
                                                ${sub.status.charAt(0).toUpperCase() + sub.status.slice(1)}
                                            </span>
                                        </div>
                                    `).join('')}
                                `}
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        // Continue with more page renders...
        // (Due to character limit, I'll create the essential functions. You can request specific pages)
        
        // Toast Notification
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            
            const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : type === 'warning' ? 'ï¿½ï¿½ï¸' : 'â„¹ï¸';
            const bgColor = type === 'success' ? 'bg-green-50 border-green-500' : type === 'error' ? 'bg-red-50 border-red-500' : type === 'warning' ? 'bg-yellow-50 border-yellow-500' : 'bg-blue-50 border-blue-500';
            const textColor = type === 'success' ? 'text-green-800' : type === 'error' ? 'text-red-800' : type === 'warning' ? 'text-yellow-800' : 'text-blue-800';
            
            toast.innerHTML = `
                <div class="flex items-center space-x-3 ${bgColor} border-l-4 p-4 rounded-lg">
                    <span class="text-2xl">${icon}</span>
                    <p class="${textColor} font-medium">${message}</p>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 4000);
        }
        
        // Session Management
        function saveUserSession() {
            if (currentUser) {
                localStorage.setItem('creativepay_user', JSON.stringify(currentUser));
                localStorage.setItem('creativepay_submissions', JSON.stringify(submissions));
            }
        }
        
        function loadUserSession() {
            const storedUser = localStorage.getItem('creativepay_user');
            const storedSubmissions = localStorage.getItem('creativepay_submissions');
            
            if (storedUser) {
                currentUser = JSON.parse(storedUser);
                updateMenu();
            }
            
            if (storedSubmissions) {
                submissions = JSON.parse(storedSubmissions);
            }
            
            const storedDarkMode = localStorage.getItem('darkMode');
            if (storedDarkMode === 'true') {
                isDarkMode = true;
                document.body.classList.add('dark-mode');
            }
        }
        
        function logout() {
            localStorage.removeItem('creativepay_user');
            localStorage.removeItem('creativepay_submissions');
            currentUser = null;
            submissions = [];
            showToast('Logged out successfully', 'success');
            setTimeout(() => {
                showPage('landing');
            }, 1500);
        }
        
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // Placeholder render functions (implement based on requirements)
        function renderTasksPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Available Tasks</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <!-- Filter Section -->
                        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                            <h3 class="text-xl font-bold mb-4">Filter Tasks</h3>
                            <div class="grid md:grid-cols-4 gap-4">
                                <select id="categoryFilter" onchange="filterTasks()" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="">All Categories</option>
                                    <option value="Poetry">Poetry</option>
                                    <option value="Short Story">Short Story</option>
                                    <option value="Essay">Essay</option>
                                </select>
                                
                                <select id="genreFilter" onchange="filterTasks()" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="">All Genres</option>
                                    <option value="Horror">Horror</option>
                                    <option value="Romance">Romance</option>
                                    <option value="Sci-Fi">Sci-Fi</option>
                                    <option value="Fantasy">Fantasy</option>
                                    <option value="Drama">Drama</option>
                                    <option value="Descriptive">Descriptive</option>
                                </select>
                                
                                <select id="rewardFilter" onchange="filterTasks()" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="">All Rewards</option>
                                    <option value="0-300">KSh 0 - 300</option>
                                    <option value="301-600">KSh 301 - 600</option>
                                    <option value="601-1000">KSh 601 - 1000</option>
                                    <option value="1001+">KSh 1001+</option>
                                </select>
                                
                                <button onclick="clearFilters()" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                                    Clear Filters
                                </button>
                            </div>
                        </div>
                        
                        <!-- Tasks Grid -->
                        <div id="tasksGrid" class="grid md:grid-cols-3 gap-6"></div>
                    </main>
                </div>
            `;
            
            // Render all tasks initially
            renderTasksList();
        }
        
        function renderTasksList(filteredTasks = null) {
            const tasksGrid = document.getElementById('tasksGrid');
            if (!tasksGrid) return;
            
            const tasksToShow = filteredTasks || tasks;
            
            if (tasksToShow.length === 0) {
                tasksGrid.innerHTML = `
                    <div class="col-span-3 text-center py-12">
                        <div class="text-6xl mb-4">ðŸ“</div>
                        <h3 class="text-2xl font-bold text-gray-700 mb-2">No Tasks Found</h3>
                        <p class="text-gray-600">Try adjusting your filters</p>
                    </div>
                `;
                return;
            }
            
            tasksGrid.innerHTML = tasksToShow.map(task => {
                const daysLeft = Math.ceil((new Date(task.deadline) - new Date()) / (1000 * 60 * 60 * 24));
                return `
                    <div class="task-card bg-white p-6 rounded-xl shadow-lg">
                        <div class="flex justify-between items-start mb-4">
                            <span class="px-3 py-1 bg-purple-100 text-purple-700 text-sm font-semibold rounded-full">${task.category}</span>
                            <span class="px-3 py-1 bg-green-100 text-green-700 text-sm font-bold rounded-full">KSh ${task.reward}</span>
                        </div>
                        
                        <h3 class="text-xl font-bold mb-2 text-gray-900">${task.title}</h3>
                        <p class="text-gray-600 mb-4 text-sm">${task.description}</p>
                        
                        <div class="space-y-2 mb-4">
                            <div class="flex items-center text-sm text-gray-600">
                                <span class="font-semibold mr-2">Genre:</span>
                                <span class="px-2 py-1 bg-gray-100 rounded">${task.genre}</span>
                            </div>
                            <div class="flex items-center text-sm text-gray-600">
                                <span class="font-semibold mr-2">Word Count:</span>
                                <span>${task.wordCountMin}-${task.wordCountMax} words</span>
                            </div>
                            <div class="flex items-center text-sm text-gray-600">
                                <span class="font-semibold mr-2">Deadline:</span>
                                <span class="text-orange-600 font-semibold">${daysLeft} days left</span>
                            </div>
                        </div>
                        
                        <button onclick="viewTaskDetails(${task.id})" class="w-full px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-semibold">
                            View Details
                        </button>
                    </div>
                `;
            }).join('');
        }
        
        function filterTasks() {
            const category = document.getElementById('categoryFilter').value;
            const genre = document.getElementById('genreFilter').value;
            const reward = document.getElementById('rewardFilter').value;
            
            let filtered = tasks.filter(task => {
                let matches = true;
                
                if (category && task.category !== category) matches = false;
                if (genre && task.genre !== genre) matches = false;
                
                if (reward) {
                    const taskReward = task.reward;
                    if (reward === '0-300' && (taskReward < 0 || taskReward > 300)) matches = false;
                    if (reward === '301-600' && (taskReward < 301 || taskReward > 600)) matches = false;
                    if (reward === '601-1000' && (taskReward < 601 || taskReward > 1000)) matches = false;
                    if (reward === '1001+' && taskReward <= 1000) matches = false;
                }
                
                return matches;
            });
            
            renderTasksList(filtered);
        }
        
        function clearFilters() {
            document.getElementById('categoryFilter').value = '';
            document.getElementById('genreFilter').value = '';
            document.getElementById('rewardFilter').value = '';
            renderTasksList();
        }
        
        function viewTaskDetails(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            const dynamicPages = document.getElementById('dynamicPages');
            const daysLeft = Math.ceil((new Date(task.deadline) - new Date()) / (1000 * 60 * 60 * 24));
            
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="showPage('tasks')" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Task Details</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                            <!-- Header -->
                            <div class="gradient-animated p-8 text-white">
                                <div class="flex justify-between items-start mb-4">
                                    <span class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-sm font-semibold">${task.category}</span>
                                    <span class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-full text-xl font-bold">KSh ${task.reward}</span>
                                </div>
                                <h2 class="text-3xl font-cinzel font-bold mb-2">${task.title}</h2>
                                <p class="text-lg opacity-90">${task.genre} â€¢ ${task.wordCountMin}-${task.wordCountMax} words</p>
                            </div>
                            
                            <!-- Content -->
                            <div class="p-8">
                                <div class="mb-8">
                                    <h3 class="text-xl font-bold mb-3 text-gray-900">Task Description</h3>
                                    <p class="text-gray-700 leading-relaxed">${task.description}</p>
                                </div>
                                
                                <div class="mb-8 p-6 bg-blue-50 rounded-lg border-2 border-blue-200">
                                    <h3 class="text-xl font-bold mb-3 text-blue-800">ðŸ“ Detailed Question & Requirements</h3>
                                    <p class="text-gray-800 leading-relaxed whitespace-pre-line">${task.detailedQuestion}</p>
                                </div>
                                
                                <div class="grid md:grid-cols-2 gap-6 mb-8">
                                    <div class="p-4 bg-purple-50 rounded-lg border-2 border-purple-200">
                                        <h4 class="font-bold text-purple-700 mb-2">ðŸ“ Word Count</h4>
                                        <p class="text-gray-700">${task.wordCountMin} - ${task.wordCountMax} words</p>
                                    </div>
                                    
                                    <div class="p-4 bg-pink-50 rounded-lg border-2 border-pink-200">
                                        <h4 class="font-bold text-pink-700 mb-2">â° Deadline</h4>
                                        <p class="text-gray-700">${new Date(task.deadline).toLocaleDateString()} (${daysLeft} days left)</p>
                                    </div>
                                    
                                    <div class="p-4 bg-orange-50 rounded-lg border-2 border-orange-200">
                                        <h4 class="font-bold text-orange-700 mb-2">ðŸŽ­ Genre</h4>
                                        <p class="text-gray-700">${task.genre}</p>
                                    </div>
                                    
                                    <div class="p-4 bg-green-50 rounded-lg border-2 border-green-200">
                                        <h4 class="font-bold text-green-700 mb-2">ðŸ’° Reward</h4>
                                        <p class="text-gray-700 text-xl font-bold">KSh ${task.reward}</p>
                                    </div>
                                </div>
                                
                                <div class="flex gap-4">
                                    <button onclick="startTask(${task.id})" class="flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                        Start Writing
                                    </button>
                                    <button onclick="showPage('tasks')" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                                        Back to Tasks
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function startTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            // Check subscription access for Essays
            if (task.category === 'Essay') {
                if (currentUser.subscriptionType !== 'premium') {
                    showToast('Essay tasks require Premium subscription!', 'error');
                    setTimeout(() => showPage('subscription'), 2000);
                    return;
                }
            }
            
            // Check if user is on Basic plan
            if (currentUser.subscriptionType === 'basic') {
                // Basic users can only access Poetry and Short Story
                if (task.category !== 'Poetry' && task.category !== 'Short Story') {
                    showToast('Your Basic plan only allows Poetry and Short Story tasks. Upgrade to Premium for Essay tasks!', 'error');
                    setTimeout(() => showPage('subscription'), 2000);
                    return;
                }
            }
            
            localStorage.setItem('selectedTaskId', taskId);
            showPage('submit');
        }
        
        function renderSubmitTaskPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const selectedTaskId = localStorage.getItem('selectedTaskId');
            const selectedTask = selectedTaskId ? tasks.find(t => t.id === parseInt(selectedTaskId)) : null;
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Submit Task</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <form id="submitForm" onsubmit="handleSubmitTask(event)" class="space-y-6">
                            <!-- Task Selection -->
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h3 class="text-xl font-bold mb-4">Select Task</h3>
                                <select id="taskSelect" ${selectedTask ? 'disabled' : ''} class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    <option value="">Choose a task...</option>
                                    ${tasks.map(task => `
                                        <option value="${task.id}" ${selectedTask && selectedTask.id === task.id ? 'selected' : ''}>
                                            ${task.title} - KSh ${task.reward}
                                        </option>
                                    `).join('')}
                                </select>
                                ${selectedTask ? `
                                    <div class="mt-4 p-4 bg-purple-50 rounded-lg">
                                        <p class="text-sm text-gray-700"><strong>Word Count:</strong> ${selectedTask.wordCountMin}-${selectedTask.wordCountMax} words</p>
                                        <p class="text-sm text-gray-700 mt-1"><strong>Deadline:</strong> ${new Date(selectedTask.deadline).toLocaleDateString()}</p>
                                    </div>
                                ` : ''}
                            </div>
                            
                            <!-- Writing Area -->
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold">Your Submission</h3>
                                    <span id="wordCount" class="text-sm font-semibold text-purple-600">0 words</span>
                                </div>
                                <textarea 
                                    id="submissionContent" 
                                    rows="15" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-serif text-lg"
                                    placeholder="Start writing your creative content here..."
                                    oninput="updateWordCount()"
                                    required
                                ></textarea>
                            </div>
                            
                            <!-- Additional Notes -->
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h3 class="text-xl font-bold mb-4">Additional Notes (Optional)</h3>
                                <textarea 
                                    id="submissionNotes" 
                                    rows="4" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    placeholder="Any additional information you'd like to include..."
                                ></textarea>
                            </div>
                            
                            <!-- Submit Button -->
                            <div class="flex gap-4">
                                <button type="submit" class="flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Submit Task
                                </button>
                                <button type="button" onclick="showPage('tasks')" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </main>
                </div>
            `;
        }
        
        function updateWordCount() {
            const content = document.getElementById('submissionContent').value;
            const words = content.trim().split(/\s+/).filter(word => word.length > 0);
            const wordCount = words.length;
            document.getElementById('wordCount').textContent = `${wordCount} words`;
        }
        
        function handleSubmitTask(event) {
            event.preventDefault();
            
            const taskId = parseInt(document.getElementById('taskSelect').value);
            const content = document.getElementById('submissionContent').value;
            const notes = document.getElementById('submissionNotes').value;
            
            const task = tasks.find(t => t.id === taskId);
            if (!task) {
                showToast('Please select a valid task', 'error');
                return;
            }
            
            // Check if user has already submitted this specific task
            const alreadySubmitted = submissions.find(s => s.taskId === taskId);
            if (alreadySubmitted) {
                showToast('You have already submitted this task. Each task can only be attempted once.', 'error');
                return;
            }
            
            // Check if user already has a pending submission
            const hasPending = submissions.find(s => s.status === 'pending');
            if (hasPending) {
                showToast('Please wait for your current submission to be reviewed before submitting another task.', 'error');
                return;
            }
            
            // Check subscription and task limit
            if (currentUser.subscriptionType === 'none') {
                if (currentUser.freeTaskUsed) {
                    showToast('Subscribe to submit more tasks!', 'error');
                    setTimeout(() => showPage('subscription'), 2000);
                    return;
                }
            }
            
            // Check word count
            const words = content.trim().split(/\s+/).filter(word => word.length > 0);
            const wordCount = words.length;
            
            if (wordCount < task.wordCountMin || wordCount > task.wordCountMax) {
                showToast(`Word count must be between ${task.wordCountMin} and ${task.wordCountMax} words`, 'error');
                return;
            }
            
            // Create submission
            const submission = {
                id: Date.now(),
                taskId: taskId,
                title: task.title,
                category: task.category,
                content: content,
                notes: notes,
                wordCount: wordCount,
                reward: task.reward,
                status: 'pending',
                submittedDate: new Date().toISOString(),
                reviewedDate: null,
                feedback: null,
                score: null
            };
            
            submissions.push(submission);
            
            // Mark free task as used if no subscription
            if (currentUser.subscriptionType === 'none') {
                currentUser.freeTaskUsed = true;
            }
            
            currentUser.tasksCompleted++;
            saveUserSession();
            
            showToast('Task submitted successfully! Starting review...', 'success');
            localStorage.removeItem('selectedTaskId');
            
            setTimeout(() => {
                startLiveReview(submission);
            }, 1500);
        }
        
        function startLiveReview(submission) {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center p-4">
                    <div class="max-w-2xl w-full bg-white rounded-xl shadow-2xl p-8">
                        <h2 class="text-3xl font-bold text-center mb-8">Reviewing Your Submission</h2>
                        
                        <div class="mb-8">
                            <div class="flex items-center justify-between mb-2">
                                <span class="font-semibold">Task: ${submission.title}</span>
                                <span class="text-sm text-gray-600">${submission.wordCount} words</span>
                            </div>
                        </div>
                        
                        <!-- Progress Bar -->
                        <div class="mb-8">
                            <div class="relative pt-1">
                                <div class="flex mb-2 items-center justify-between">
                                    <div>
                                        <span id="reviewStage" class="text-sm font-semibold inline-block py-1 px-2 uppercase rounded-full text-purple-600 bg-purple-200">
                                            Initializing...
                                        </span>
                                    </div>
                                    <div class="text-right">
                                        <span id="reviewPercent" class="text-sm font-semibold inline-block text-purple-600">
                                            0%
                                        </span>
                                    </div>
                                </div>
                                <div class="overflow-hidden h-4 mb-4 text-xs flex rounded-full bg-purple-200">
                                    <div id="reviewProgress" style="width:0%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-gradient-to-r from-purple-600 to-pink-600 transition-all duration-500"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Review Checks -->
                        <div id="reviewChecks" class="space-y-3 mb-8">
                            <div id="check1" class="flex items-center p-3 bg-gray-100 rounded-lg">
                                <span class="text-2xl mr-3">â³</span>
                                <span class="text-gray-600">Checking word count requirements...</span>
                            </div>
                            <div id="check2" class="flex items-center p-3 bg-gray-100 rounded-lg">
                                <span class="text-2xl mr-3">â³</span>
                                <span class="text-gray-600">Analyzing content quality...</span>
                            </div>
                            <div id="check3" class="flex items-center p-3 bg-gray-100 rounded-lg">
                                <span class="text-2xl mr-3">â³</span>
                                <span class="text-gray-600">Checking grammar and structure...</span>
                            </div>
                            <div id="check4" class="flex items-center p-3 bg-gray-100 rounded-lg">
                                <span class="text-2xl mr-3">â³</span>
                                <span class="text-gray-600">Verifying creativity and originality...</span>
                            </div>
                            <div id="check5" class="flex items-center p-3 bg-gray-100 rounded-lg">
                                <span class="text-2xl mr-3">â³</span>
                                <span class="text-gray-600">Calculating final score...</span>
                            </div>
                        </div>
                        
                        <div class="text-center text-gray-500 text-sm">
                            <p>ï¿½ï¿½ï¿½ï¿½ Review in progress... This usually takes about 30 seconds</p>
                        </div>
                    </div>
                </div>
            `;
            
            // Start review process
            performLiveReview(submission);
        }
        
        function performLiveReview(submission) {
            const reviewStage = document.getElementById('reviewStage');
            const reviewPercent = document.getElementById('reviewPercent');
            const reviewProgress = document.getElementById('reviewProgress');
            
            let progress = 0;
            const stages = [
                { id: 'check1', text: 'Word Count', time: 3000, pass: true },
                { id: 'check2', text: 'Content Quality', time: 6000, pass: null },
                { id: 'check3', text: 'Grammar', time: 5000, pass: null },
                { id: 'check4', text: 'Creativity', time: 7000, pass: null },
                { id: 'check5', text: 'Final Score', time: 4000, pass: null }
            ];
            
            let currentStage = 0;
            
            function updateProgress() {
                if (currentStage < stages.length) {
                    const stage = stages[currentStage];
                    progress = Math.min(100, ((currentStage + 1) / stages.length) * 100);
                    
                    reviewStage.textContent = stage.text;
                    reviewPercent.textContent = Math.round(progress) + '%';
                    reviewProgress.style.width = progress + '%';
                    
                    // Mark as complete after delay
                    setTimeout(() => {
                        const checkEl = document.getElementById(stage.id);
                        if (checkEl) {
                            const isPassing = stage.pass !== null ? stage.pass : Math.random() > 0.3;
                            checkEl.innerHTML = `
                                <span class="text-2xl mr-3">${isPassing ? 'âœ…' : 'ï¿½ï¿½ï¿½'}</span>
                                <span class="${isPassing ? 'text-green-600 font-semibold' : 'text-gray-600'}">${stage.text} ${isPassing ? '- Passed' : '- Checking...'}</span>
                            `;
                        }
                        
                        currentStage++;
                        if (currentStage < stages.length) {
                            updateProgress();
                        } else {
                            completeReview(submission);
                        }
                    }, stage.time);
                }
            }
            
            updateProgress();
        }
        
        function completeReview(submission) {
            // Calculate score
            const approvedCount = submissions.filter(s => s.status === 'approved').length;
            const isFirstTask = approvedCount === 0;
            const hasSubscription = currentUser.subscriptionType !== 'none';
            const subscriptionType = currentUser.subscriptionType;
            
            let score;
            let status;
            let earnAmount = 0;
            
            if (isFirstTask) {
                // First task always earns something (under 100 KSh)
                score = Math.floor(Math.random() * 10) + 90; // 90-100%
                status = 'approved';
                // Moderate earning based on score to make sense
                const scorePercentage = score / 100;
                const baseEarning = Math.min(submission.reward, Math.floor(Math.random() * 90) + 10); // 10-99 KSh
                earnAmount = Math.floor(baseEarning * scorePercentage);
            } else if (hasSubscription) {
                // Check Basic plan task limits
                if (subscriptionType === 'basic' && approvedCount >= 10) {
                    // Basic user exceeded 10 tasks - always fail
                    score = Math.floor(Math.random() * 40) + 50; // 50-89%
                    status = 'rejected';
                    earnAmount = 0;
                } else {
                    // After subscription, 30% probability of good score
                    const willPass = Math.random() < 0.30;
                    if (willPass) {
                        score = Math.floor(Math.random() * 10) + 90; // 90-100%
                        status = 'approved';
                        // Moderate earning to match score
                        const scorePercentage = score / 100;
                        earnAmount = Math.floor(submission.reward * scorePercentage);
                    } else {
                        score = Math.floor(Math.random() * 40) + 50; // 50-89%
                        status = 'rejected';
                    }
                }
            } else {
                // No subscription after first task
                score = Math.floor(Math.random() * 40) + 50;
                status = 'rejected';
            }
            
            // Generate feedback with score explanation
            const feedback = generateFeedback(score, submission.category, earnAmount, submission.reward);
            
            // Update submission
            const sub = submissions.find(s => s.id === submission.id);
            if (sub) {
                sub.status = status;
                sub.score = score;
                sub.feedback = feedback;
                sub.reviewedDate = new Date().toISOString();
                
                if (status === 'approved') {
                    // For free users, money goes to earnings but can't withdraw until activation
                    if (currentUser.subscriptionType === 'none') {
                        currentUser.earningsBalance += earnAmount;
                        currentUser.earnings += earnAmount;
                    } else {
                        currentUser.earningsBalance += earnAmount;
                        currentUser.earnings += earnAmount;
                    }
                    currentUser.points += earnAmount * 10;
                    
                    // Level up logic
                    if (currentUser.points >= 5000 && currentUser.level === 'Beginner') {
                        currentUser.level = 'Intermediate';
                    } else if (currentUser.points >= 15000 && currentUser.level === 'Intermediate') {
                        currentUser.level = 'Pro';
                    } else if (currentUser.points >= 30000 && currentUser.level === 'Pro') {
                        currentUser.level = 'Elite';
                    }
                }
            }
            
            saveUserSession();
            
            // Show results
            showReviewResults(submission, score, status, earnAmount, feedback);
        }
        
        function generateFeedback(score, category, earnAmount, maxReward) {
            if (score >= 90) {
                const excellent = [
                    `Exceptional work! Your ${category.toLowerCase()} demonstrates strong creativity and excellent command of language. The narrative flows beautifully and engages the reader throughout.`,
                    `Outstanding submission! You've crafted a compelling ${category.toLowerCase()} with vivid imagery and well-developed themes. Your writing style is engaging and professional.`,
                    `Brilliant work! Your ${category.toLowerCase()} shows remarkable depth and originality. The structure is solid, and your use of literary devices enhances the overall impact.`,
                    `Impressive submission! Your ${category.toLowerCase()} captures the essence of the prompt perfectly. The pacing, tone, and character development (if applicable) are all excellently executed.`
                ];
                let feedback = excellent[Math.floor(Math.random() * excellent.length)];
                
                // Add score-based earning explanation
                if (earnAmount < maxReward) {
                    feedback += `\n\nScore Breakdown: Your work scored ${score}%, which translates to ${Math.round((earnAmount/maxReward)*100)}% of the maximum reward. Minor improvements in [specific areas based on score deductions] would earn you the full amount.`;
                }
                
                return feedback;
            } else if (score >= 75) {
                const good = [
                    `Good effort! Your ${category.toLowerCase()} shows promise, but could benefit from more vivid descriptions and stronger character development. Consider revising the middle section for better flow.`,
                    `Solid work! Your ${category.toLowerCase()} has a good foundation. To improve, focus on varying your sentence structure and adding more sensory details to immerse the reader.`,
                    `Nice attempt! Your ${category.toLowerCase()} demonstrates understanding of the genre. However, the conclusion feels rushed. Take time to develop your ending more thoroughly.`
                ];
                return good[Math.floor(Math.random() * good.length)] + `\n\nYour score of ${score}% falls short of the 90% minimum for approval.`;
            } else {
                const needsWork = [
                    `Your ${category.toLowerCase()} needs significant improvement. The content doesn't fully address the prompt requirements. Please review the task description carefully and ensure all elements are included. Work on developing your ideas more thoroughly.`,
                    `This submission doesn't meet our quality standards. The ${category.toLowerCase()} lacks depth and originality. Consider reading examples of successful submissions in this category and revise your approach.`,
                    `Unfortunately, this ${category.toLowerCase()} falls short of expectations. Key requirements from the prompt are missing. Please study the detailed question and case study keywords more carefully before attempting future tasks.`,
                    `Your submission needs more work. The ${category.toLowerCase()} doesn't demonstrate sufficient creativity or attention to the prompt details. Focus on quality over speed in future submissions.`
                ];
                return needsWork[Math.floor(Math.random() * needsWork.length)] + `\n\nYour score of ${score}% is below the 90% minimum required for approval.`;
            }
        }
        
        function showReviewResults(submission, score, status, earnAmount, feedback) {
            const dynamicPages = document.getElementById('dynamicPages');
            const isApproved = status === 'approved';
            const hasSubscription = currentUser.subscriptionType !== 'none';
            const approvedCount = submissions.filter(s => s.status === 'approved').length;
            const isBasicUser = currentUser.subscriptionType === 'basic';
            const shouldShowUpgradeMessage = isBasicUser && approvedCount >= 10;
            
            // Calculate score position on visual scale
            const scorePosition = (score / 100) * 100; // percentage for CSS
            
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center p-4">
                    <div class="max-w-2xl w-full bg-white rounded-xl shadow-2xl p-8">
                        <div class="text-center mb-8">
                            <div class="w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center ${isApproved ? 'bg-green-100' : 'bg-red-100'}">
                                <span class="text-5xl">${isApproved ? 'âœ…' : 'âŒ'}</span>
                            </div>
                            <h2 class="text-3xl font-bold mb-2 ${isApproved ? 'text-green-600' : 'text-red-600'}">
                                ${isApproved ? 'Task Approved!' : 'Task Not Approved'}
                            </h2>
                            <p class="text-gray-600">Your submission has been reviewed</p>
                        </div>
                        
                        <!-- Score Display with Visual Scale -->
                        <div class="mb-8 p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl">
                            <div class="text-center mb-4">
                                <p class="text-gray-600 mb-2">Your Score</p>
                                <p class="text-6xl font-bold gradient-animated bg-clip-text text-transparent">${score}%</p>
                            </div>
                            
                            <!-- Visual Score Scale -->
                            <div class="mt-6 mb-4">
                                <div class="relative h-12 bg-gradient-to-r from-red-500 via-yellow-500 to-green-500 rounded-full overflow-hidden">
                                    <!-- Minimum threshold marker -->
                                    <div class="absolute left-[90%] top-0 bottom-0 w-1 bg-white z-10"></div>
                                    <div class="absolute left-[90%] -top-8 text-xs font-bold text-gray-700 transform -translate-x-1/2">
                                        90% Min â†“
                                    </div>
                                    
                                    <!-- Score marker -->
                                    <div class="absolute top-1/2 -translate-y-1/2 transition-all duration-1000" style="left: ${scorePosition}%;">
                                        <div class="relative">
                                            <div class="w-6 h-6 bg-white border-4 border-purple-600 rounded-full shadow-lg transform -translate-x-1/2"></div>
                                            <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 bg-purple-600 text-white px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap">
                                                You: ${score}%
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-between text-xs text-gray-600 mt-2">
                                    <span>0%</span>
                                    <span class="font-bold">Pass Threshold: 90%</span>
                                    <span>100%</span>
                                </div>
                            </div>
                            
                            ${isApproved ? `
                                <div class="text-center pt-4 border-t-2 border-purple-200">
                                    <p class="text-gray-600 mb-2">Earned ${Math.round((earnAmount/submission.reward)*100)}% of maximum reward</p>
                                    <p class="text-4xl font-bold text-green-600">KSh ${earnAmount.toFixed(2)}</p>
                                    <p class="text-sm text-gray-500 mt-1">Maximum possible: KSh ${submission.reward}</p>
                                    ${!hasSubscription ? `
                                        <p class="text-sm text-orange-600 mt-2 font-semibold">âš ï¸ Earnings locked until subscription activation</p>
                                    ` : ''}
                                </div>
                            ` : `
                                <div class="text-center pt-4 border-t-2 border-purple-200">
                                    <p class="text-red-600 font-semibold">Minimum passing score: 90%</p>
                                    <p class="text-sm text-gray-600 mt-2">You scored ${score}%, which is ${90 - score}% below the threshold</p>
                                    <p class="text-sm text-gray-600">This task cannot be resubmitted</p>
                                </div>
                            `}
                        </div>
                        
                        ${shouldShowUpgradeMessage ? `
                            <div class="mb-6 p-4 bg-orange-50 border-2 border-orange-300 rounded-lg">
                                <h4 class="font-bold text-orange-700 mb-2">ðŸ”’ Basic Plan Task Limit Reached</h4>
                                <p class="text-sm text-gray-700 mb-3">You've completed 10 tasks on your Basic plan. To continue earning, please upgrade to Premium for unlimited tasks!</p>
                                <button onclick="showPage('subscription')" class="w-full px-4 py-2 bg-gradient-to-r from-orange-600 to-yellow-600 text-white rounded-lg hover:from-orange-700 hover:to-yellow-700 font-semibold">
                                    Upgrade to Premium
                                </button>
                            </div>
                        ` : ''}
                        
                        <!-- Feedback Section -->
                        <div class="mb-8">
                            <button onclick="toggleFeedback()" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold flex items-center justify-between">
                                <span>ðŸ“ View Detailed Feedback</span>
                                <svg id="feedbackIcon" class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div id="feedbackContent" class="hidden mt-4 p-6 bg-blue-50 rounded-lg border-2 border-blue-200">
                                <h4 class="font-bold text-blue-700 mb-3">Reviewer Feedback</h4>
                                <p class="text-gray-800 leading-relaxed whitespace-pre-line">${feedback}</p>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="space-y-3">
                            ${isApproved ? `
                                <button onclick="showPage('dashboard')" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Go to Dashboard
                                </button>
                                ${!hasSubscription ? `
                                    <button onclick="showPage('subscription')" class="w-full px-6 py-3 bg-gradient-to-r from-orange-600 to-yellow-600 text-white rounded-lg hover:from-orange-700 hover:to-yellow-700 font-bold shadow-lg">
                                        ï¿½ï¿½ Activate Subscription to Unlock Earnings
                                    </button>
                                ` : shouldShowUpgradeMessage ? '' : `
                                    <button onclick="showPage('tasks')" class="w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                                        Browse More Tasks
                                    </button>
                                `}
                            ` : `
                                ${hasSubscription && !shouldShowUpgradeMessage ? `
                                    <button onclick="showPage('tasks')" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                        Try Another Task
                                    </button>
                                ` : `
                                    <button onclick="showPage('subscription')" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                        Subscribe for More Opportunities
                                    </button>
                                `}
                                <button onclick="showPage('dashboard')" class="w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                                    Go to Dashboard
                                </button>
                            `}
                        </div>
                    </div>
                </div>
            `;
        }
        
        function toggleFeedback() {
            const content = document.getElementById('feedbackContent');
            const icon = document.getElementById('feedbackIcon');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            } else {
                content.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        }
        
        function renderWithdrawPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const hasActiveSubscription = currentUser.subscriptionType !== 'none' && 
                                         currentUser.subscriptionExpiry && 
                                         new Date(currentUser.subscriptionExpiry) > new Date();
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Withdraw Funds</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        ${!hasActiveSubscription && currentUser.earningsBalance > 0 ? `
                            <div class="bg-orange-50 border-2 border-orange-300 rounded-xl shadow-lg p-6 mb-8">
                                <div class="flex items-start">
                                    <span class="text-4xl mr-4">ðŸ”’</span>
                                    <div>
                                        <h3 class="text-xl font-bold text-orange-700 mb-2">Earnings Locked - Subscription Required</h3>
                                        <p class="text-gray-700 mb-3">You have <strong>KSh ${currentUser.earningsBalance.toFixed(2)}</strong> in earned funds, but withdrawals require an active subscription.</p>
                                        <p class="text-sm text-gray-600 mb-4">Your earnings from completed tasks are safely stored and will be available for withdrawal once you activate a subscription package.</p>
                                        <button onclick="showPage('subscription')" class="px-6 py-3 bg-gradient-to-r from-orange-600 to-yellow-600 text-white rounded-lg hover:from-orange-700 hover:to-yellow-700 font-bold shadow-lg">
                                            ðŸ”“ Activate Subscription to Unlock
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                        
                        <!-- Balance Overview -->
                        <div class="grid md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-xl shadow-lg border-2 border-yellow-200">
                                <h3 class="text-xl font-bold mb-4 text-yellow-700">ðŸ’° Bonus Balance</h3>
                                <p class="text-4xl font-bold text-yellow-600 mb-2">KSh ${currentUser.bonusBalance.toFixed(2)}</p>
                                <p class="text-sm text-gray-600">No minimum withdrawal</p>
                            </div>
                            
                            <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl shadow-lg border-2 border-green-200 ${!hasActiveSubscription && currentUser.earningsBalance > 0 ? 'opacity-50' : ''}">
                                <h3 class="text-xl font-bold mb-4 text-green-700">ðŸ’µ Earnings Balance</h3>
                                <p class="text-4xl font-bold text-green-600 mb-2">KSh ${currentUser.earningsBalance.toFixed(2)}</p>
                                ${!hasActiveSubscription ? `
                                    <p class="text-sm text-orange-600 font-semibold">ðŸ”’ Requires active subscription</p>
                                ` : `
                                    <p class="text-sm text-gray-600">Minimum withdrawal: KSh 250</p>
                                `}
                            </div>
                        </div>
                        
                        <!-- Withdrawal Form -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h3 class="text-xl font-bold mb-6">Request Withdrawal</h3>
                            
                            <form id="withdrawForm" onsubmit="handleWithdrawal(event)" class="space-y-6">
                                <div>
                                    <label for="withdrawType" class="block text-sm font-medium text-gray-700 mb-2">Withdrawal Source</label>
                                    <select id="withdrawType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                        <option value="">Select source...</option>
                                        <option value="bonus">Bonus Balance (KSh ${currentUser.bonusBalance.toFixed(2)})</option>
                                        <option value="earnings">Earnings Balance (KSh ${currentUser.earningsBalance.toFixed(2)})</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="withdrawAmount" class="block text-sm font-medium text-gray-700 mb-2">Amount (KSh)</label>
                                    <input type="number" id="withdrawAmount" min="1" step="0.01" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    <p class="text-sm text-gray-600 mt-1">Fees: 2% Platform + 5% VAT + 5% Transaction (Total: 12%)</p>
                                </div>
                                
                                <div>
                                    <label for="withdrawMethod" class="block text-sm font-medium text-gray-700 mb-2">Payment Method</label>
                                    <select id="withdrawMethod" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                        <option value="">Select method...</option>
                                        <option value="mpesa">M-Pesa</option>
                                        <option value="bank">Bank Transfer</option>
                                        <option value="paypal">PayPal</option>
                                    </select>
                                </div>
                                
                                <div id="paymentDetailsSection"></div>
                                
                                <div id="withdrawalSummary" class="hidden p-4 bg-purple-50 rounded-lg border-2 border-purple-200">
                                    <h4 class="font-bold text-purple-700 mb-2">Withdrawal Summary</h4>
                                    <div class="space-y-1 text-sm">
                                        <div class="flex justify-between">
                                            <span>Withdrawal Amount:</span>
                                            <span id="summaryAmount">KSh 0.00</span>
                                        </div>
                                        <div class="flex justify-between text-red-600">
                                            <span>Platform Fee (2%):</span>
                                            <span id="summaryPlatformFee">KSh 0.00</span>
                                        </div>
                                        <div class="flex justify-between text-red-600">
                                            <span>VAT (5%):</span>
                                            <span id="summaryVat">KSh 0.00</span>
                                        </div>
                                        <div class="flex justify-between text-red-600">
                                            <span>Transaction Fee (5%):</span>
                                            <span id="summaryTransactionFee">KSh 0.00</span>
                                        </div>
                                        <div class="flex justify-between text-red-700 font-semibold pt-1 border-t border-purple-300">
                                            <span>Total Fees (12%):</span>
                                            <span id="summaryTotalFees">KSh 0.00</span>
                                        </div>
                                        <div class="flex justify-between font-bold text-base pt-2 border-t-2 border-purple-400 text-green-700">
                                            <span>You'll receive:</span>
                                            <span id="summaryTotal">KSh 0.00</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Request Withdrawal
                                </button>
                            </form>
                        </div>
                    </main>
                </div>
            `;
            
            // Add event listeners
            setTimeout(() => {
                const withdrawAmount = document.getElementById('withdrawAmount');
                const withdrawType = document.getElementById('withdrawType');
                const withdrawMethod = document.getElementById('withdrawMethod');
                
                if (withdrawAmount) {
                    withdrawAmount.addEventListener('input', updateWithdrawalSummary);
                }
                if (withdrawType) {
                    withdrawType.addEventListener('change', updateWithdrawalSummary);
                }
                if (withdrawMethod) {
                    withdrawMethod.addEventListener('change', () => {
                        const method = withdrawMethod.value;
                        const detailsSection = document.getElementById('paymentDetailsSection');
                        
                        if (method === 'mpesa') {
                            detailsSection.innerHTML = `
                                <div>
                                    <label for="mpesaNumber" class="block text-sm font-medium text-gray-700 mb-2">M-Pesa Number</label>
                                    <input type="tel" id="mpesaNumber" placeholder="254XXXXXXXXX" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                </div>
                            `;
                        } else if (method === 'bank') {
                            detailsSection.innerHTML = `
                                <div class="space-y-4">
                                    <div>
                                        <label for="bankName" class="block text-sm font-medium text-gray-700 mb-2">Bank Name</label>
                                        <input type="text" id="bankName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    </div>
                                    <div>
                                        <label for="accountNumber" class="block text-sm font-medium text-gray-700 mb-2">Account Number</label>
                                        <input type="text" id="accountNumber" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    </div>
                                    <div>
                                        <label for="accountName" class="block text-sm font-medium text-gray-700 mb-2">Account Name</label>
                                        <input type="text" id="accountName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    </div>
                                </div>
                            `;
                        } else if (method === 'paypal') {
                            detailsSection.innerHTML = `
                                <div>
                                    <label for="paypalEmail" class="block text-sm font-medium text-gray-700 mb-2">PayPal Email</label>
                                    <input type="email" id="paypalEmail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                </div>
                            `;
                        } else {
                            detailsSection.innerHTML = '';
                        }
                    });
                }
            }, 100);
        }
        
        function updateWithdrawalSummary() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value) || 0;
            const type = document.getElementById('withdrawType').value;
            
            if (amount > 0 && type) {
                const platformFee = amount * 0.02; // 2% platform fee
                const vat = amount * 0.05; // 5% VAT
                const transactionFee = amount * 0.05; // 5% transaction fee
                const totalFees = platformFee + vat + transactionFee;
                const total = amount - totalFees;
                
                document.getElementById('summaryAmount').textContent = `KSh ${amount.toFixed(2)}`;
                document.getElementById('summaryPlatformFee').textContent = `KSh ${platformFee.toFixed(2)}`;
                document.getElementById('summaryVat').textContent = `KSh ${vat.toFixed(2)}`;
                document.getElementById('summaryTransactionFee').textContent = `KSh ${transactionFee.toFixed(2)}`;
                document.getElementById('summaryTotalFees').textContent = `KSh ${totalFees.toFixed(2)}`;
                document.getElementById('summaryTotal').textContent = `KSh ${total.toFixed(2)}`;
                document.getElementById('withdrawalSummary').classList.remove('hidden');
            } else {
                document.getElementById('withdrawalSummary').classList.add('hidden');
            }
        }
        
        function handleWithdrawal(event) {
            event.preventDefault();
            
            const type = document.getElementById('withdrawType').value;
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const method = document.getElementById('withdrawMethod').value;
            
            // Check if user has active subscription for earnings withdrawal
            const hasActiveSubscription = currentUser.subscriptionType !== 'none' && 
                                         currentUser.subscriptionExpiry && 
                                         new Date(currentUser.subscriptionExpiry) > new Date();
            
            if (type === 'earnings' && !hasActiveSubscription) {
                showToast('Earnings withdrawal requires an active subscription. Please activate a subscription package first.', 'error');
                setTimeout(() => showPage('subscription'), 2000);
                return;
            }
            
            // Check minimum withdrawal for earnings
            if (type === 'earnings' && amount < 250) {
                showToast('Minimum withdrawal for earnings is KSh 250', 'error');
                return;
            }
            
            // Get payment details based on method
            let paymentDetails = '';
            if (method === 'mpesa') {
                paymentDetails = document.getElementById('mpesaNumber')?.value || '';
            } else if (method === 'bank') {
                const bankName = document.getElementById('bankName')?.value || '';
                const accountNumber = document.getElementById('accountNumber')?.value || '';
                const accountName = document.getElementById('accountName')?.value || '';
                paymentDetails = `${bankName} - ${accountNumber} (${accountName})`;
            } else if (method === 'paypal') {
                paymentDetails = document.getElementById('paypalEmail')?.value || '';
            }
            
            if (!paymentDetails) {
                showToast('Please enter payment details', 'error');
                return;
            }
            
            // Calculate fees
            const platformFee = amount * 0.02;
            const vat = amount * 0.05;
            const transactionFee = amount * 0.05;
            const totalFees = platformFee + vat + transactionFee;
            const netAmount = amount - totalFees;
            
            // Show confirmation dialog
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50 flex items-center justify-center p-4">
                    <div class="max-w-2xl w-full bg-white rounded-xl shadow-2xl p-8">
                        <h2 class="text-3xl font-bold text-center mb-6">Confirm Withdrawal</h2>
                        
                        <div class="space-y-4 mb-8">
                            <div class="flex justify-between p-4 bg-gray-50 rounded-lg">
                                <span class="font-semibold">Withdrawal Source:</span>
                                <span class="text-purple-600 font-bold">${type === 'bonus' ? 'Bonus Balance' : 'Earnings Balance'}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-gray-50 rounded-lg">
                                <span class="font-semibold">Amount:</span>
                                <span class="text-2xl font-bold">KSh ${amount.toFixed(2)}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-red-50 rounded-lg text-red-600">
                                <span class="font-semibold">Platform Fee (2%):</span>
                                <span>- KSh ${platformFee.toFixed(2)}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-red-50 rounded-lg text-red-600">
                                <span class="font-semibold">VAT (5%):</span>
                                <span>- KSh ${vat.toFixed(2)}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-red-50 rounded-lg text-red-600">
                                <span class="font-semibold">Transaction Fee (5%):</span>
                                <span>- KSh ${transactionFee.toFixed(2)}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-green-50 rounded-lg border-2 border-green-300">
                                <span class="font-bold text-lg">You'll Receive:</span>
                                <span class="text-3xl font-bold text-green-600">KSh ${netAmount.toFixed(2)}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-blue-50 rounded-lg">
                                <span class="font-semibold">Payment Method:</span>
                                <span class="font-bold">${method.toUpperCase()}</span>
                            </div>
                            
                            <div class="flex justify-between p-4 bg-blue-50 rounded-lg">
                                <span class="font-semibold">Payment Details:</span>
                                <span class="font-mono text-sm">${paymentDetails}</span>
                            </div>
                        </div>
                        
                        <div class="flex gap-4">
                            <button onclick="processWithdrawal('${type}', ${amount}, '${method}', '${paymentDetails}', ${netAmount})" class="flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 font-bold text-lg shadow-lg">
                                âœ“ Confirm Withdrawal
                            </button>
                            <button onclick="showPage('withdraw')" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function processWithdrawal(type, amount, method, paymentDetails, netAmount) {
            // Show processing screen
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center p-4">
                    <div class="max-w-lg w-full bg-white rounded-xl shadow-2xl p-12 text-center">
                        <h2 class="text-3xl font-bold mb-8">Processing Withdrawal...</h2>
                        
                        <!-- Rotating Progress Bar -->
                        <div class="relative w-32 h-32 mx-auto mb-8">
                            <svg class="w-32 h-32 animate-spin" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="40" fill="none" stroke="#e5e7eb" stroke-width="8"/>
                                <circle cx="50" cy="50" r="40" fill="none" stroke="url(#gradient)" stroke-width="8" 
                                        stroke-dasharray="251.2" stroke-dashoffset="62.8" stroke-linecap="round"/>
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-4xl">ðŸ’¸</span>
                            </div>
                        </div>
                        
                        <p class="text-gray-600 mb-2">Please wait while we process your withdrawal...</p>
                        <p class="text-sm text-gray-500">This may take a few moments</p>
                    </div>
                </div>
            `;
            
            // Simulate processing time
            setTimeout(() => {
                completeWithdrawal(type, amount, method, paymentDetails, netAmount);
            }, 3000);
        }
        
        function completeWithdrawal(type, amount, method, paymentDetails, netAmount) {
            // Validate and deduct from balance
            if (type === 'bonus') {
                if (amount > currentUser.bonusBalance) {
                    showToast('Insufficient bonus balance', 'error');
                    showPage('withdraw');
                    return;
                }
                currentUser.bonusBalance -= amount;
            } else if (type === 'earnings') {
                // Check Basic user withdrawal rules
                const isBasicUser = currentUser.subscriptionType === 'basic';
                const lastWithdrawal = currentUser.lastWithdrawalTime;
                const sixHoursInMs = 6 * 60 * 60 * 1000;
                
                if (isBasicUser && lastWithdrawal) {
                    const timeSinceLastWithdrawal = Date.now() - new Date(lastWithdrawal).getTime();
                    if (timeSinceLastWithdrawal < sixHoursInMs) {
                        const hoursLeft = Math.ceil((sixHoursInMs - timeSinceLastWithdrawal) / (60 * 60 * 1000));
                        showToast(`Basic plan users can withdraw once every 6 hours. Please wait ${hoursLeft} more hour(s).`, 'error');
                        showPage('withdraw');
                        return;
                    }
                }
                
                // If withdrawal is less than 10, allow negative balance
                if (amount < 10) {
                    currentUser.earningsBalance -= amount;
                } else {
                    if (amount > currentUser.earningsBalance) {
                        showToast('Insufficient earnings balance', 'error');
                        showPage('withdraw');
                        return;
                    }
                    currentUser.earningsBalance -= amount;
                }
                
                // Record withdrawal time
                currentUser.lastWithdrawalTime = new Date().toISOString();
            }
            
            // Add to recent activity as "payment in progress"
            if (!currentUser.recentActivity) {
                currentUser.recentActivity = [];
            }
            
            currentUser.recentActivity.unshift({
                id: Date.now(),
                type: 'withdrawal',
                amount: netAmount,
                grossAmount: amount,
                status: 'Payment in Progress',
                method: method,
                paymentDetails: paymentDetails,
                date: new Date().toISOString()
            });
            
            // Keep only last 10 activities
            if (currentUser.recentActivity.length > 10) {
                currentUser.recentActivity = currentUser.recentActivity.slice(0, 10);
            }
            
            saveUserSession();
            
            // Show success message
            const dynamicPages = document.getElementById('dynamicPages');
            const isBasicUser = currentUser.subscriptionType === 'basic';
            
            dynamicPages.innerHTML = `
                <div class="page min-h-screen gradient-animated flex items-center justify-center p-4">
                    <div class="max-w-lg w-full bg-white rounded-xl shadow-2xl p-12 text-center">
                        <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                            <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        
                        <h2 class="text-3xl font-bold mb-4 text-green-600">Withdrawal Submitted!</h2>
                        <p class="text-gray-600 mb-6">Your withdrawal request has been processed successfully.</p>
                        
                        <div class="bg-gray-50 rounded-lg p-6 mb-6 text-left">
                            <div class="flex justify-between mb-2">
                                <span class="text-gray-600">Amount Withdrawn:</span>
                                <span class="font-bold">KSh ${amount.toFixed(2)}</span>
                            </div>
                            <div class="flex justify-between mb-2">
                                <span class="text-gray-600">Total Fees:</span>
                                <span class="font-bold text-red-600">- KSh ${(amount - netAmount).toFixed(2)}</span>
                            </div>
                            <div class="flex justify-between pt-2 border-t-2">
                                <span class="font-bold">You'll Receive:</span>
                                <span class="font-bold text-green-600 text-xl">KSh ${netAmount.toFixed(2)}</span>
                            </div>
                        </div>
                        
                        ${isBasicUser && type === 'earnings' ? `
                            <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6">
                                <p class="text-sm text-blue-800">
                                    <strong>â° Basic Plan Withdrawal Limit:</strong><br>
                                    You can make your next withdrawal in 6 hours. Payment will be sent to your ${method.toUpperCase()} account within 24-48 hours.
                                </p>
                            </div>
                        ` : `
                            <div class="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6">
                                <p class="text-sm text-blue-800">
                                    <strong>Status:</strong> Payment in Progress<br>
                                    Payment will be sent to your ${method.toUpperCase()} account within 24-48 hours.
                                </p>
                            </div>
                        `}
                        
                        <button onclick="showPage('dashboard')" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                            Return to Dashboard
                        </button>
                    </div>
                </div>
            `;
        }
        
        function renderLeaderboardPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            // Generate mock leaderboard data
            const leaderboard = [
                { name: 'Sarah Kamau', points: 5420, earnings: 54200, level: 'Elite', rank: 1 },
                { name: 'James Odhiambo', points: 4890, earnings: 48900, level: 'Elite', rank: 2 },
                { name: 'Amina Mohamed', points: 3650, earnings: 36500, level: 'Pro', rank: 3 },
                { name: 'David Mutua', points: 3120, earnings: 31200, level: 'Pro', rank: 4 },
                { name: 'Grace Wanjiku', points: 2870, earnings: 28700, level: 'Intermediate', rank: 5 }
            ];
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Leaderboard</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h2 class="text-2xl font-bold mb-6 text-center">Top Writers</h2>
                            
                            <div class="space-y-4">
                                ${leaderboard.map(writer => `
                                    <div class="leaderboard-item p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                                        <div class="rank-badge ${writer.rank <= 3 ? 'rank-' + writer.rank : 'bg-gray-300 text-gray-700'}">
                                            ${writer.rank}
                                        </div>
                                        <div class="flex-1">
                                            <h3 class="font-bold text-lg">${writer.name}</h3>
                                            <div class="flex items-center gap-4 text-sm text-gray-600 mt-1">
                                                <span class="level-badge">${writer.level}</span>
                                                <span>ï¿½ï¿½ï¿½ï¿½ï¿½ ${writer.points} points</span>
                                                <span>ðŸ’° KSh ${writer.earnings.toLocaleString()}</span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function renderSubmissionsPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">My Submissions</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        ${submissions.length === 0 ? `
                            <div class="bg-white rounded-xl shadow-lg p-12 text-center">
                                <div class="text-6xl mb-4">ðŸ“</div>
                                <h3 class="text-2xl font-bold text-gray-700 mb-2">No Submissions Yet</h3>
                                <p class="text-gray-600 mb-6">Start writing to see your submissions here</p>
                                <button onclick="showPage('tasks')" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold shadow-lg">
                                    Browse Tasks
                                </button>
                            </div>
                        ` : `
                            <div class="grid gap-6">
                                ${submissions.map(sub => `
                                    <div class="bg-white rounded-xl shadow-lg p-6">
                                        <div class="flex justify-between items-start mb-4">
                                            <div>
                                                <h3 class="text-xl font-bold">${sub.title}</h3>
                                                <p class="text-sm text-gray-600">${sub.category}</p>
                                            </div>
                                            <span class="px-4 py-2 ${sub.status === 'approved' ? 'bg-green-100 text-green-700' : sub.status === 'rejected' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'} rounded-full text-sm font-semibold">
                                                ${sub.status.charAt(0).toUpperCase() + sub.status.slice(1)}
                                            </span>
                                        </div>
                                        
                                        <div class="grid md:grid-cols-4 gap-4 mb-4">
                                            <div class="text-sm">
                                                <span class="font-semibold">Word Count:</span> ${sub.wordCount}
                                            </div>
                                            <div class="text-sm">
                                                <span class="font-semibold">Reward:</span> KSh ${sub.reward}
                                            </div>
                                            <div class="text-sm">
                                                <span class="font-semibold">Submitted:</span> ${new Date(sub.submittedDate).toLocaleDateString()}
                                            </div>
                                            <div class="text-sm">
                                                <span class="font-semibold">Status:</span> ${sub.status}
                                            </div>
                                        </div>
                                        
                                        ${sub.feedback ? `
                                            <div class="p-4 bg-gray-50 rounded-lg mb-4">
                                                <h4 class="font-bold mb-2">Feedback:</h4>
                                                <p class="text-gray-700">${sub.feedback}</p>
                                            </div>
                                        ` : ''}
                                        
                                        <button onclick="viewSubmission(${sub.id})" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold">
                                            View Details
                                        </button>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </main>
                </div>
            `;
        }
        
        function viewSubmission(submissionId) {
            const submission = submissions.find(s => s.id === submissionId);
            if (!submission) return;
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="showPage('submissions')" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Submission Details</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <div class="flex justify-between items-start mb-6">
                                <div>
                                    <h2 class="text-3xl font-bold mb-2">${submission.title}</h2>
                                    <p class="text-gray-600">${submission.category}</p>
                                </div>
                                <span class="px-4 py-2 ${submission.status === 'approved' ? 'bg-green-100 text-green-700' : submission.status === 'rejected' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'} rounded-full text-sm font-semibold">
                                    ${submission.status.charAt(0).toUpperCase() + submission.status.slice(1)}
                                </span>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-4 mb-6">
                                <div class="p-4 bg-purple-50 rounded-lg">
                                    <p class="text-sm text-gray-600">Word Count</p>
                                    <p class="text-2xl font-bold text-purple-600">${submission.wordCount}</p>
                                </div>
                                <div class="p-4 bg-green-50 rounded-lg">
                                    <p class="text-sm text-gray-600">Reward</p>
                                    <p class="text-2xl font-bold text-green-600">KSh ${submission.reward}</p>
                                </div>
                                <div class="p-4 bg-blue-50 rounded-lg">
                                    <p class="text-sm text-gray-600">Submitted</p>
                                    <p class="text-lg font-bold text-blue-600">${new Date(submission.submittedDate).toLocaleDateString()}</p>
                                </div>
                            </div>
                            
                            ${submission.feedback ? `
                                <div class="p-6 bg-yellow-50 rounded-lg mb-6 border-2 border-yellow-200">
                                    <h3 class="font-bold text-yellow-700 text-lg mb-2">Review Feedback</h3>
                                    <p class="text-gray-700">${submission.feedback}</p>
                                </div>
                            ` : ''}
                            
                            <div class="mb-6">
                                <h3 class="font-bold text-lg mb-3">Submission Content</h3>
                                <div class="p-6 bg-gray-50 rounded-lg border border-gray-200">
                                    <p class="text-gray-800 whitespace-pre-wrap font-serif leading-relaxed">${submission.content}</p>
                                </div>
                            </div>
                            
                            ${submission.notes ? `
                                <div class="mb-6">
                                    <h3 class="font-bold text-lg mb-3">Additional Notes</h3>
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <p class="text-gray-700">${submission.notes}</p>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <button onclick="showPage('submissions')" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                                Back to Submissions
                            </button>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function renderProfilePage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">My Profile</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <div class="flex items-center mb-8">
                                <div class="w-24 h-24 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-4xl">
                                    ${currentUser.name.charAt(0).toUpperCase()}
                                </div>
                                <div class="ml-6">
                                    <h2 class="text-3xl font-bold">${currentUser.name}</h2>
                                    <span class="level-badge text-lg">${currentUser.level}</span>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-6 mb-8">
                                <div class="text-center p-4 bg-purple-50 rounded-lg">
                                    <p class="text-3xl font-bold text-purple-600">${currentUser.points}</p>
                                    <p class="text-gray-600">Total Points</p>
                                </div>
                                <div class="text-center p-4 bg-green-50 rounded-lg">
                                    <p class="text-3xl font-bold text-green-600">KSh ${currentUser.earnings.toFixed(2)}</p>
                                    <p class="text-gray-600">Total Earnings</p>
                                </div>
                                <div class="text-center p-4 bg-blue-50 rounded-lg">
                                    <p class="text-3xl font-bold text-blue-600">${submissions.filter(s => s.status === 'approved').length}</p>
                                    <p class="text-gray-600">Approved Tasks</p>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <p class="px-4 py-3 bg-gray-50 rounded-lg">${currentUser.email}</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                    <p class="px-4 py-3 bg-gray-50 rounded-lg">${currentUser.phone}</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Member Since</label>
                                    <p class="px-4 py-3 bg-gray-50 rounded-lg">${new Date(currentUser.joinDate).toLocaleDateString()}</p>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function renderSubscriptionPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            const hasActiveSubscription = currentUser.subscriptionType !== 'none' && 
                                         currentUser.subscriptionExpiry && 
                                         new Date(currentUser.subscriptionExpiry) > new Date();
            
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Subscription Plans</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        ${hasActiveSubscription ? `
                            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="text-xl font-bold mb-2">Current Plan: ${currentUser.subscriptionType.charAt(0).toUpperCase() + currentUser.subscriptionType.slice(1)}</h3>
                                        <p class="text-gray-600">Expires: ${new Date(currentUser.subscriptionExpiry).toLocaleDateString()}</p>
                                    </div>
                                    <span class="px-4 py-2 bg-green-100 text-green-700 rounded-full font-semibold">Active</span>
                                </div>
                            </div>
                        ` : `
                            <div class="bg-gradient-to-r from-orange-50 to-red-50 rounded-xl shadow-lg p-6 mb-8 border-2 border-orange-200">
                                <div class="flex items-center">
                                    <span class="text-4xl mr-4">ï¿½ï¿½ï¿½ï¸</span>
                                    <div>
                                        <h3 class="text-xl font-bold text-orange-700 mb-1">No Active Subscription</h3>
                                        <p class="text-gray-700">You can only complete 1 task without a subscription. Subscribe to unlock unlimited tasks!</p>
                                        ${currentUser.freeTaskUsed ? `
                                            <p class="text-red-600 font-semibold mt-2">âœ–ï¸ Your free task has been used. Please subscribe to continue.</p>
                                        ` : `
                                            <p class="text-green-600 font-semibold mt-2">âœ“ You have 1 free task remaining</p>
                                        `}
                                    </div>
                                </div>
                            </div>
                        `}
                        
                        <h2 class="text-3xl font-cinzel font-bold text-center mb-8">Choose Your Plan</h2>
                        
                        <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                            <!-- Basic Plan -->
                            <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform transition-all hover:scale-105">
                                <div class="bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white text-center">
                                    <h3 class="text-2xl font-bold mb-2">Basic Plan</h3>
                                    <div class="text-5xl font-bold mb-2">KSh 310</div>
                                    <p class="text-blue-100">per month</p>
                                </div>
                                
                                <div class="p-8">
                                    <ul class="space-y-4 mb-8">
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>15 Tasks</strong> per month</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>24-48 Hours</strong> withdrawal processing</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span>Access to <strong>Poetry</strong> tasks only</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span>Access to <strong>Short Story</strong> tasks only</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-red-500 mr-3 text-xl">âœ—</span>
                                            <span class="text-gray-500">No access to <strong>Essay</strong> tasks</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Email Support</strong></span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Community Access</strong></span>
                                        </li>
                                    </ul>
                                    
                                    <button onclick="selectPlan('basic')" class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 font-bold text-lg shadow-lg">
                                        Select Basic
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Premium Plan -->
                            <div class="bg-white rounded-2xl shadow-xl overflow-hidden transform transition-all hover:scale-105 border-4 border-purple-500 relative">
                                <div class="absolute top-0 right-0 bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 py-1 rounded-bl-lg font-bold text-sm">
                                    POPULAR
                                </div>
                                <div class="bg-gradient-to-br from-purple-600 to-pink-600 p-6 text-white text-center">
                                    <h3 class="text-2xl font-bold mb-2">Premium Plan</h3>
                                    <div class="text-5xl font-bold mb-2">KSh 489</div>
                                    <p class="text-purple-100">per month</p>
                                </div>
                                
                                <div class="p-8">
                                    <ul class="space-y-4 mb-8">
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Unlimited Tasks</strong> ðŸ”¥</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Instant Withdrawals</strong> âš¡</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span>Access to <strong>ALL Task Types</strong></span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Script Writing</strong> tasks (exclusive)</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Priority Review</strong> of submissions</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>24/7 Priority Support</strong></span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Bonus Points</strong> on every task</span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="text-green-500 mr-3 text-xl">âœ“</span>
                                            <span><strong>Exclusive Webinars</strong></span>
                                        </li>
                                    </ul>
                                    
                                    <button onclick="selectPlan('premium')" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                        Select Premium
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function selectPlan(planType) {
            localStorage.setItem('selectedPlan', planType);
            showPage('subscription-payment');
        }
        
        function renderSubscriptionPaymentPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const planType = localStorage.getItem('selectedPlan');
            if (!planType) {
                showPage('subscription');
                return;
            }
            
            const planDetails = {
                basic: {
                    name: 'Basic Plan',
                    price: 310,
                    features: ['15 Tasks per month', '24-48 Hours withdrawals', 'Poetry & Short Story tasks only', 'No Essay tasks']
                },
                premium: {
                    name: 'Premium Plan',
                    price: 489,
                    features: ['Unlimited Tasks', 'Instant Withdrawals', 'Poetry, Short Story & Essay tasks', 'Priority Review']
                }
            };
            
            const plan = planDetails[planType];
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="showPage('subscription')" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Complete Payment</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <!-- Plan Summary -->
                        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h2 class="text-2xl font-bold mb-6">Payment Summary</h2>
                            
                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-lg mb-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-xl font-bold">${plan.name}</h3>
                                        <ul class="mt-2 space-y-1 text-sm text-gray-700">
                                            ${plan.features.map(f => `<li>âœ“ ${f}</li>`).join('')}
                                        </ul>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-3xl font-bold text-purple-600">KSh ${plan.price}</p>
                                        <p class="text-sm text-gray-600">per month</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="border-t pt-6">
                                <h3 class="text-lg font-bold mb-4">Payment Method</h3>
                                
                                <!-- Pay Now Button -->
                                <a 
                                    href="https://lipana.dev/pay/subscription-c7b1-1" 
                                    target="_blank"
                                    class="block w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg text-center mb-6"
                                >
                                    ðŸ’³ Pay Now - KSh ${plan.price}
                                </a>
                                
                                <!-- Already Paid Section -->
                                <div class="bg-blue-50 rounded-lg p-6 border-2 border-blue-200">
                                    <h4 class="font-bold text-blue-700 mb-3">Already Paid? Confirm Your Payment</h4>
                                    <p class="text-sm text-gray-700 mb-4">If you've already completed payment but the page didn't redirect, paste your payment confirmation message below:</p>
                                    
                                    <form id="paymentConfirmForm" onsubmit="confirmPayment(event, '${planType}')" class="space-y-4">
                                        <div>
                                            <label for="paymentMessage" class="block text-sm font-medium text-gray-700 mb-2">Payment Confirmation Message</label>
                                            <textarea 
                                                id="paymentMessage" 
                                                rows="5" 
                                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                                placeholder="Paste the M-Pesa confirmation message here..."
                                                required
                                            ></textarea>
                                            <p class="text-xs text-gray-500 mt-1">Example: "Confirmed. Ksh310.00 sent to CREATIVEPAY..."</p>
                                        </div>
                                        
                                        <button type="submit" class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold shadow-lg">
                                            Confirm Payment
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Payment Instructions -->
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <h3 class="text-xl font-bold mb-4">Payment Instructions</h3>
                            <ol class="space-y-3 text-gray-700">
                                <li class="flex items-start">
                                    <span class="font-bold text-purple-600 mr-3">1.</span>
                                    <span>Click the "Pay Now" button above to be redirected to the payment page</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="font-bold text-purple-600 mr-3">2.</span>
                                    <span>Complete your payment using M-Pesa or your preferred method</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="font-bold text-purple-600 mr-3">3.</span>
                                    <span>You should be automatically redirected back to CreativePay</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="font-bold text-purple-600 mr-3">4.</span>
                                    <span>If not redirected, copy your M-Pesa confirmation message and paste it in the form above</span>
                                </li>
                            </ol>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function confirmPayment(event, planType) {
            event.preventDefault();
            
            const paymentMessage = document.getElementById('paymentMessage').value.trim();
            
            if (!paymentMessage || paymentMessage.length < 20) {
                showToast('Please enter a valid payment confirmation message', 'error');
                return;
            }
            
            // Validate M-Pesa message
            const validation = validateMpesaMessage(paymentMessage, planType);
            
            if (!validation.isValid) {
                showToast(validation.error, 'error');
                return;
            }
            
            // Activate subscription
            const expiryDate = new Date();
            expiryDate.setMonth(expiryDate.getMonth() + 1);
            
            currentUser.subscriptionType = planType;
            currentUser.subscriptionExpiry = expiryDate.toISOString();
            
            saveUserSession();
            localStorage.removeItem('selectedPlan');
            
            showToast('Subscription activated successfully! Welcome to ' + planType.charAt(0).toUpperCase() + planType.slice(1) + ' Plan!', 'success');
            
            setTimeout(() => {
                showPage('dashboard');
            }, 2000);
        }
        
        function validateMpesaMessage(message, planType) {
            // Expected amounts
            const expectedAmounts = {
                basic: 310,
                premium: 489
            };
            
            const expectedAmount = expectedAmounts[planType];
            
            // Check if message contains "Confirmed" or similar confirmation words
            const confirmationWords = ['confirmed', 'received', 'sent', 'paid'];
            const hasConfirmation = confirmationWords.some(word => message.toLowerCase().includes(word));
            
            if (!hasConfirmation) {
                return {
                    isValid: false,
                    error: 'Invalid M-Pesa message. Please paste the complete confirmation message from M-Pesa.'
                };
            }
            
            // Check if message contains "LIPANA TECHNOLOGIES LIMITED" or "LIPANA"
            const hasRecipient = message.toLowerCase().includes('lipana') || 
                                message.toLowerCase().includes('lipana technologies');
            
            if (!hasRecipient) {
                return {
                    isValid: false,
                    error: 'Payment recipient does not match. Payment must be sent to LIPANA TECHNOLOGIES LIMITED.'
                };
            }
            
            // Check if message contains the correct amount
            const amountRegex = /(?:ksh|kes|sh)?\s*(\d+(?:,\d{3})*(?:\.\d{2})?)/gi;
            const amounts = [];
            let match;
            
            while ((match = amountRegex.exec(message)) !== null) {
                const amountStr = match[1].replace(/,/g, '');
                const amount = parseFloat(amountStr);
                amounts.push(amount);
            }
            
            const hasCorrectAmount = amounts.some(amount => 
                Math.abs(amount - expectedAmount) < 1 // Allow for small rounding differences
            );
            
            if (!hasCorrectAmount) {
                return {
                    isValid: false,
                    error: `Payment amount incorrect. Expected KSh ${expectedAmount} for ${planType} plan. Please verify your payment.`
                };
            }
            
            // Check if message date is within last 3 days
            const dateRegex = /(\d{1,2}[\/\-\.]\d{1,2}[\/\-\.]\d{2,4})|(\d{1,2}\s+(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)[a-z]*\s+\d{2,4})/gi;
            const dateMatches = message.match(dateRegex);
            
            if (dateMatches && dateMatches.length > 0) {
                const messageDate = parsePaymentDate(dateMatches[0]);
                if (messageDate) {
                    const now = new Date();
                    const threeDaysAgo = new Date(now.getTime() - (3 * 24 * 60 * 60 * 1000));
                    
                    if (messageDate < threeDaysAgo) {
                        return {
                            isValid: false,
                            error: 'Payment confirmation is too old. Please make a fresh payment within the last 3 days.'
                        };
                    }
                    
                    if (messageDate > now) {
                        return {
                            isValid: false,
                            error: 'Payment date is in the future. Please check your payment message.'
                        };
                    }
                }
            }
            
            return { isValid: true };
        }
        
        function parsePaymentDate(dateStr) {
            try {
                // Try various date formats
                // Format: DD/MM/YYYY or DD-MM-YYYY or DD.MM.YYYY
                const parts = dateStr.split(/[\/\-\.]/);
                if (parts.length === 3) {
                    const day = parseInt(parts[0]);
                    const month = parseInt(parts[1]) - 1; // JS months are 0-indexed
                    let year = parseInt(parts[2]);
                    
                    // Handle 2-digit years
                    if (year < 100) {
                        year += 2000;
                    }
                    
                    return new Date(year, month, day);
                }
                
                // Try parsing as text date (e.g., "12 Jan 2024")
                const parsedDate = new Date(dateStr);
                if (!isNaN(parsedDate.getTime())) {
                    return parsedDate;
                }
            } catch (e) {
                // Parsing failed
            }
            
            return null;
        }
        
        function renderPaymentSettingsPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Payment Details</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <h2 class="text-2xl font-bold mb-6">Saved Payment Methods</h2>
                            
                            <form id="paymentDetailsForm" onsubmit="savePaymentDetails(event)" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Preferred Payment Method</label>
                                    <select id="paymentMethod" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                        <option value="mpesa">M-Pesa</option>
                                        <option value="bank">Bank Transfer</option>
                                        <option value="paypal">PayPal</option>
                                    </select>
                                </div>
                                
                                <div id="mpesaDetails">
                                    <label for="mpesaPhone" class="block text-sm font-medium text-gray-700 mb-2">M-Pesa Phone Number</label>
                                    <input type="tel" id="mpesaPhone" value="${currentUser.paymentDetails?.mpesaPhone || ''}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="254XXXXXXXXX">
                                </div>
                                
                                <div id="bankDetails" style="display: none;" class="space-y-4">
                                    <div>
                                        <label for="bankName" class="block text-sm font-medium text-gray-700 mb-2">Bank Name</label>
                                        <input type="text" id="bankName" value="${currentUser.paymentDetails?.bankName || ''}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div>
                                        <label for="bankAccount" class="block text-sm font-medium text-gray-700 mb-2">Account Number</label>
                                        <input type="text" id="bankAccount" value="${currentUser.paymentDetails?.bankAccount || ''}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div>
                                        <label for="bankAccountName" class="block text-sm font-medium text-gray-700 mb-2">Account Name</label>
                                        <input type="text" id="bankAccountName" value="${currentUser.paymentDetails?.bankAccountName || ''}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                </div>
                                
                                <div id="paypalDetails" style="display: none;">
                                    <label for="paypalEmail" class="block text-sm font-medium text-gray-700 mb-2">PayPal Email</label>
                                    <input type="email" id="paypalEmail" value="${currentUser.paymentDetails?.paypalEmail || ''}" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                
                                <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Save Payment Details
                                </button>
                            </form>
                        </div>
                    </main>
                </div>
            `;
            
            // Add event listener for payment method change
            setTimeout(() => {
                const paymentMethod = document.getElementById('paymentMethod');
                if (paymentMethod) {
                    paymentMethod.addEventListener('change', function() {
                        document.getElementById('mpesaDetails').style.display = this.value === 'mpesa' ? 'block' : 'none';
                        document.getElementById('bankDetails').style.display = this.value === 'bank' ? 'block' : 'none';
                        document.getElementById('paypalDetails').style.display = this.value === 'paypal' ? 'block' : 'none';
                    });
                }
            }, 100);
        }
        
        function savePaymentDetails(event) {
            event.preventDefault();
            
            const method = document.getElementById('paymentMethod').value;
            
            currentUser.paymentDetails = {
                preferredMethod: method,
                mpesaPhone: document.getElementById('mpesaPhone')?.value || '',
                bankName: document.getElementById('bankName')?.value || '',
                bankAccount: document.getElementById('bankAccount')?.value || '',
                bankAccountName: document.getElementById('bankAccountName')?.value || '',
                paypalEmail: document.getElementById('paypalEmail')?.value || ''
            };
            
            saveUserSession();
            showToast('Payment details saved successfully!', 'success');
            setTimeout(() => showPage('dashboard'), 1500);
        }
        
        function renderReviewsPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const approvedSubmissions = submissions.filter(s => s.status === 'approved' && s.feedback);
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Reviews & Feedback</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        ${approvedSubmissions.length === 0 ? `
                            <div class="bg-white rounded-xl shadow-lg p-12 text-center">
                                <div class="text-6xl mb-4">â­</div>
                                <h3 class="text-2xl font-bold text-gray-700 mb-2">No Reviews Yet</h3>
                                <p class="text-gray-600 mb-6">Complete tasks to receive feedback from reviewers</p>
                                <button onclick="showPage('tasks')" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold shadow-lg">
                                    Browse Tasks
                                </button>
                            </div>
                        ` : `
                            <div class="space-y-6">
                                ${approvedSubmissions.map(sub => `
                                    <div class="bg-white rounded-xl shadow-lg p-6">
                                        <div class="flex justify-between items-start mb-4">
                                            <div>
                                                <h3 class="text-xl font-bold">${sub.title}</h3>
                                                <p class="text-sm text-gray-600">${sub.category}</p>
                                            </div>
                                            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-semibold">Approved</span>
                                        </div>
                                        
                                        <div class="p-4 bg-green-50 rounded-lg border-2 border-green-200">
                                            <h4 class="font-bold text-green-700 mb-2">âœ¨ Reviewer Feedback</h4>
                                            <p class="text-gray-700">${sub.feedback || 'Great work! Your submission was approved.'}</p>
                                        </div>
                                        
                                        <div class="mt-4 text-sm text-gray-600">
                                            <span>Reviewed: ${sub.reviewedDate ? new Date(sub.reviewedDate).toLocaleDateString() : 'N/A'}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </main>
                </div>
            `;
        }
        
        function renderRefundPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Request Refund</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <h2 class="text-2xl font-bold mb-6">Refund Request Form</h2>
                            
                            <form id="refundForm" onsubmit="submitRefund(event)" class="space-y-6">
                                <div>
                                    <label for="refundReason" class="block text-sm font-medium text-gray-700 mb-2">Reason for Refund</label>
                                    <select id="refundReason" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                        <option value="">Select reason...</option>
                                        <option value="payment-error">Payment Error</option>
                                        <option value="duplicate-payment">Duplicate Payment</option>
                                        <option value="service-issue">Service Issue</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="refundAmount" class="block text-sm font-medium text-gray-700 mb-2">Amount (KSh)</label>
                                    <input type="number" id="refundAmount" min="1" step="0.01" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                </div>
                                
                                <div>
                                    <label for="refundDetails" class="block text-sm font-medium text-gray-700 mb-2">Details</label>
                                    <textarea id="refundDetails" rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Please provide details about your refund request..." required></textarea>
                                </div>
                                
                                <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Submit Refund Request
                                </button>
                            </form>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function submitRefund(event) {
            event.preventDefault();
            showToast('Refund request submitted successfully! We will review it within 24 hours.', 'success');
            setTimeout(() => showPage('dashboard'), 2000);
        }
        
        function renderReportPage() {
            if (!currentUser) {
                showPage('login');
                return;
            }
            
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <button onclick="toggleMenu()" class="text-purple-600 hover:text-purple-700">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                        </svg>
                                    </button>
                                    <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Report / Complaint</h1>
                                </div>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <h2 class="text-2xl font-bold mb-6">Submit a Report or Complaint</h2>
                            
                            <form id="reportForm" onsubmit="submitReport(event)" class="space-y-6">
                                <div>
                                    <label for="reportType" class="block text-sm font-medium text-gray-700 mb-2">Report Type</label>
                                    <select id="reportType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                        <option value="">Select type...</option>
                                        <option value="payment-issue">Payment Issue</option>
                                        <option value="task-issue">Task/Review Issue</option>
                                        <option value="technical">Technical Problem</option>
                                        <option value="account">Account Issue</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="reportSubject" class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                                    <input type="text" id="reportSubject" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                </div>
                                
                                <div>
                                    <label for="reportMessage" class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                                    <textarea id="reportMessage" rows="8" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Please describe your issue in detail..." required></textarea>
                                </div>
                                
                                <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold text-lg shadow-lg">
                                    Submit Report
                                </button>
                            </form>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function submitReport(event) {
            event.preventDefault();
            showToast('Report submitted successfully! Our support team will contact you soon.', 'success');
            setTimeout(() => showPage('dashboard'), 2000);
        }
        
        function renderAboutPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">About CreativePay</h1>
                                <button onclick="showPage('landing')" class="text-gray-600 hover:text-gray-800">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                            <h2 class="text-3xl font-bold mb-6">Our Story</h2>
                            <p class="text-gray-700 leading-relaxed mb-4">
                                CreativePay was founded with a simple mission: to empower creative writers by providing them with opportunities to earn from their passion. We believe that every story deserves to be told, and every writer deserves fair compensation for their craft.
                            </p>
                            <p class="text-gray-700 leading-relaxed mb-4">
                                We partner with publishing houses, film studios, and media companies to bring you diverse writing opportunities across multiple genres. Whether you're a budding poet, a storyteller, or a scriptwriter, CreativePay is your platform to shine.
                            </p>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <h2 class="text-3xl font-bold mb-6">Why Choose Us?</h2>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="p-4 bg-purple-50 rounded-lg">
                                    <h3 class="font-bold text-lg mb-2">ðŸ’° Fair Compensation</h3>
                                    <p class="text-gray-700">We ensure writers receive competitive rates for their work.</p>
                                </div>
                                <div class="p-4 bg-pink-50 rounded-lg">
                                    <h3 class="font-bold text-lg mb-2">ðŸš€ Growth Opportunities</h3>
                                    <p class="text-gray-700">Access to workshops, webinars, and networking events.</p>
                                </div>
                                <div class="p-4 bg-orange-50 rounded-lg">
                                    <h3 class="font-bold text-lg mb-2">ðŸŒŸ Recognition</h3>
                                    <p class="text-gray-700">Build your portfolio and get discovered by industry professionals.</p>
                                </div>
                                <div class="p-4 bg-green-50 rounded-lg">
                                    <h3 class="font-bold text-lg mb-2">ðŸ¤ Community</h3>
                                    <p class="text-gray-700">Join a vibrant community of creative writers.</p>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function renderContactPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Contact Us</h1>
                                <button onclick="showPage('landing')" class="text-gray-600 hover:text-gray-800">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <div class="grid md:grid-cols-2 gap-8">
                            <div class="bg-white rounded-xl shadow-lg p-8">
                                <h2 class="text-2xl font-bold mb-6">Get in Touch</h2>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-4">ðŸ“§</span>
                                        <div>
                                            <h3 class="font-bold">Email</h3>
                                            <p class="text-gray-600">support@creativepay.co.ke</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-4">ðŸ“±</span>
                                        <div>
                                            <h3 class="font-bold">Phone</h3>
                                            <p class="text-gray-600">+254 700 123 456</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-4">ðŸ“</span>
                                        <div>
                                            <h3 class="font-bold">Location</h3>
                                            <p class="text-gray-600">Nairobi, Kenya</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center">
                                        <span class="text-2xl mr-4">â°</span>
                                        <div>
                                            <h3 class="font-bold">Business Hours</h3>
                                            <p class="text-gray-600">Mon-Fri: 8AM - 6PM EAT</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-xl shadow-lg p-8">
                                <h2 class="text-2xl font-bold mb-6">Send a Message</h2>
                                
                                <form id="contactForm" onsubmit="submitContact(event)" class="space-y-4">
                                    <div>
                                        <label for="contactName" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                                        <input type="text" id="contactName" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    </div>
                                    
                                    <div>
                                        <label for="contactEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                        <input type="email" id="contactEmail" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required>
                                    </div>
                                    
                                    <div>
                                        <label for="contactMessage" class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                                        <textarea id="contactMessage" rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" required></textarea>
                                    </div>
                                    
                                    <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 font-bold shadow-lg">
                                        Send Message
                                    </button>
                                </form>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function submitContact(event) {
            event.preventDefault();
            showToast('Message sent successfully! We will get back to you soon.', 'success');
            setTimeout(() => showPage('landing'), 2000);
        }
        
        function renderTermsPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Terms of Service</h1>
                                <button onclick="showPage('landing')" class="text-gray-600 hover:text-gray-800">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <div class="bg-white rounded-xl shadow-lg p-8 space-y-6">
                            <h2 class="text-3xl font-bold">Terms of Service</h2>
                            <p class="text-sm text-gray-600">Last updated: ${new Date().toLocaleDateString()}</p>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">1. Acceptance of Terms</h3>
                                <p class="text-gray-700">By accessing and using CreativePay, you accept and agree to be bound by these Terms of Service.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">2. User Accounts</h3>
                                <p class="text-gray-700">You must be at least 18 years old to create an account. You are responsible for maintaining the confidentiality of your account credentials.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">3. Content Ownership</h3>
                                <p class="text-gray-700">You retain ownership of your original content. By submitting content, you grant CreativePay a non-exclusive license to review, display, and distribute your work to our partners.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">4. Payments</h3>
                                <p class="text-gray-700">Payments are processed according to the subscription plan selected. Refunds are subject to our refund policy.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">5. Prohibited Content</h3>
                                <p class="text-gray-700">You may not submit content that is illegal, offensive, plagiarized, or violates third-party rights.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">6. Termination</h3>
                                <p class="text-gray-700">We reserve the right to terminate accounts that violate these terms or engage in fraudulent activity.</p>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
        
        function renderPrivacyPage() {
            const dynamicPages = document.getElementById('dynamicPages');
            dynamicPages.innerHTML = `
                <div class="page min-h-screen bg-gray-50">
                    <header class="bg-white shadow-sm sticky top-0 z-50">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <h1 class="text-2xl font-cinzel font-bold gradient-animated bg-clip-text text-transparent">Privacy Policy</h1>
                                <button onclick="showPage('landing')" class="text-gray-600 hover:text-gray-800">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <div class="bg-white rounded-xl shadow-lg p-8 space-y-6">
                            <h2 class="text-3xl font-bold">Privacy Policy</h2>
                            <p class="text-sm text-gray-600">Last updated: ${new Date().toLocaleDateString()}</p>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">1. Information We Collect</h3>
                                <p class="text-gray-700">We collect personal information including name, email, phone number, and payment details to provide our services.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">2. How We Use Your Information</h3>
                                <p class="text-gray-700">Your information is used to process payments, communicate with you, and improve our services.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">3. Data Security</h3>
                                <p class="text-gray-700">We implement industry-standard security measures to protect your personal information.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">4. Third-Party Sharing</h3>
                                <p class="text-gray-700">We do not sell your personal information. We may share data with trusted partners only to facilitate our services.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">5. Cookies</h3>
                                <p class="text-gray-700">We use cookies to enhance user experience and analyze site usage.</p>
                            </div>
                            
                            <div>
                                <h3 class="text-xl font-bold mb-3">6. Your Rights</h3>
                                <p class="text-gray-700">You have the right to access, update, or delete your personal information at any time.</p>
                            </div>
                        </div>
                    </main>
                </div>
            `;
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c742054b400b281',t:'MTc2OTk3Njk4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>